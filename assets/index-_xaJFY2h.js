var me=Object.defineProperty;var ge=(V,D,m)=>D in V?me(V,D,{enumerable:!0,configurable:!0,writable:!0,value:m}):V[D]=m;var Y=(V,D,m)=>(ge(V,typeof D!="symbol"?D+"":D,m),m);(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))C(u);new MutationObserver(u=>{for(const r of u)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&C(l)}).observe(document,{childList:!0,subtree:!0});function m(u){const r={};return u.integrity&&(r.integrity=u.integrity),u.referrerPolicy&&(r.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?r.credentials="include":u.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function C(u){if(u.ep)return;u.ep=!0;const r=m(u);fetch(u.href,r)}})();var K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function he(V){return V&&V.__esModule&&Object.prototype.hasOwnProperty.call(V,"default")?V.default:V}var fe={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(V,D){(function(C,u){V.exports=u()})(K,function(){return function(m){var C={};function u(r){if(C[r])return C[r].exports;var l=C[r]={i:r,l:!1,exports:{}};return m[r].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=m,u.c=C,u.d=function(r,l,f){u.o(r,l)||Object.defineProperty(r,l,{enumerable:!0,get:f})},u.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},u.t=function(r,l){if(l&1&&(r=u(r)),l&8||l&4&&typeof r=="object"&&r&&r.__esModule)return r;var f=Object.create(null);if(u.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:r}),l&2&&typeof r!="string")for(var s in r)u.d(f,s,(function(v){return r[v]}).bind(null,s));return f},u.n=function(r){var l=r&&r.__esModule?function(){return r.default}:function(){return r};return u.d(l,"a",l),l},u.o=function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},u.p="",u(u.s=20)}([function(m,C){var u={};m.exports=u,function(){u._baseDelta=1e3/60,u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(l,f){var s,v;typeof f=="boolean"?(s=2,v=f):(s=1,v=!0);for(var c=s;c<arguments.length;c++){var e=arguments[c];if(e)for(var n in e)v&&e[n]&&e[n].constructor===Object&&(!l[n]||l[n].constructor===Object)?(l[n]=l[n]||{},u.extend(l[n],v,e[n])):l[n]=e[n]}return l},u.clone=function(l,f){return u.extend({},f,l)},u.keys=function(l){if(Object.keys)return Object.keys(l);var f=[];for(var s in l)f.push(s);return f},u.values=function(l){var f=[];if(Object.keys){for(var s=Object.keys(l),v=0;v<s.length;v++)f.push(l[s[v]]);return f}for(var c in l)f.push(l[c]);return f},u.get=function(l,f,s,v){f=f.split(".").slice(s,v);for(var c=0;c<f.length;c+=1)l=l[f[c]];return l},u.set=function(l,f,s,v,c){var e=f.split(".").slice(v,c);return u.get(l,f,0,-1)[e[e.length-1]]=s,s},u.shuffle=function(l){for(var f=l.length-1;f>0;f--){var s=Math.floor(u.random()*(f+1)),v=l[f];l[f]=l[s],l[s]=v}return l},u.choose=function(l){return l[Math.floor(u.random()*l.length)]},u.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},u.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},u.isFunction=function(l){return typeof l=="function"},u.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},u.isString=function(l){return toString.call(l)==="[object String]"},u.clamp=function(l,f,s){return l<f?f:l>s?s:l},u.sign=function(l){return l<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(l,f){return l=typeof l<"u"?l:0,f=typeof f<"u"?f:1,l+r()*(f-l)};var r=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[l]||(u.warn(l),u._warnedOnce[l]=!0)},u.deprecated=function(l,f,s){l[f]=u.chain(function(){u.warnOnce("ðŸ”… deprecated ðŸ”…",s)},l[f])},u.nextId=function(){return u._nextId++},u.indexOf=function(l,f){if(l.indexOf)return l.indexOf(f);for(var s=0;s<l.length;s++)if(l[s]===f)return s;return-1},u.map=function(l,f){if(l.map)return l.map(f);for(var s=[],v=0;v<l.length;v+=1)s.push(f(l[v]));return s},u.topologicalSort=function(l){var f=[],s=[],v=[];for(var c in l)!s[c]&&!v[c]&&u._topologicalSort(c,s,v,l,f);return f},u._topologicalSort=function(l,f,s,v,c){var e=v[l]||[];s[l]=!0;for(var n=0;n<e.length;n+=1){var t=e[n];s[t]||f[t]||u._topologicalSort(t,f,s,v,c)}s[l]=!1,f[l]=!0,c.push(l)},u.chain=function(){for(var l=[],f=0;f<arguments.length;f+=1){var s=arguments[f];s._chained?l.push.apply(l,s._chained):l.push(s)}var v=function(){for(var c,e=new Array(arguments.length),n=0,t=arguments.length;n<t;n++)e[n]=arguments[n];for(n=0;n<l.length;n+=1){var i=l[n].apply(c,e);typeof i<"u"&&(c=i)}return c};return v._chained=l,v},u.chainPathBefore=function(l,f,s){return u.set(l,f,u.chain(s,u.get(l,f)))},u.chainPathAfter=function(l,f,s){return u.set(l,f,u.chain(u.get(l,f),s))},u.setDecomp=function(l){u._decomp=l},u.getDecomp=function(){var l=u._decomp;try{!l&&typeof window<"u"&&(l=window.decomp),!l&&typeof K<"u"&&(l=K.decomp)}catch{l=null}return l}}()},function(m,C){var u={};m.exports=u,function(){u.create=function(r){var l={min:{x:0,y:0},max:{x:0,y:0}};return r&&u.update(l,r),l},u.update=function(r,l,f){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var s=0;s<l.length;s++){var v=l[s];v.x>r.max.x&&(r.max.x=v.x),v.x<r.min.x&&(r.min.x=v.x),v.y>r.max.y&&(r.max.y=v.y),v.y<r.min.y&&(r.min.y=v.y)}f&&(f.x>0?r.max.x+=f.x:r.min.x+=f.x,f.y>0?r.max.y+=f.y:r.min.y+=f.y)},u.contains=function(r,l){return l.x>=r.min.x&&l.x<=r.max.x&&l.y>=r.min.y&&l.y<=r.max.y},u.overlaps=function(r,l){return r.min.x<=l.max.x&&r.max.x>=l.min.x&&r.max.y>=l.min.y&&r.min.y<=l.max.y},u.translate=function(r,l){r.min.x+=l.x,r.max.x+=l.x,r.min.y+=l.y,r.max.y+=l.y},u.shift=function(r,l){var f=r.max.x-r.min.x,s=r.max.y-r.min.y;r.min.x=l.x,r.max.x=l.x+f,r.min.y=l.y,r.max.y=l.y+s}}()},function(m,C){var u={};m.exports=u,function(){u.create=function(r,l){return{x:r||0,y:l||0}},u.clone=function(r){return{x:r.x,y:r.y}},u.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},u.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},u.rotate=function(r,l,f){var s=Math.cos(l),v=Math.sin(l);f||(f={});var c=r.x*s-r.y*v;return f.y=r.x*v+r.y*s,f.x=c,f},u.rotateAbout=function(r,l,f,s){var v=Math.cos(l),c=Math.sin(l);s||(s={});var e=f.x+((r.x-f.x)*v-(r.y-f.y)*c);return s.y=f.y+((r.x-f.x)*c+(r.y-f.y)*v),s.x=e,s},u.normalise=function(r){var l=u.magnitude(r);return l===0?{x:0,y:0}:{x:r.x/l,y:r.y/l}},u.dot=function(r,l){return r.x*l.x+r.y*l.y},u.cross=function(r,l){return r.x*l.y-r.y*l.x},u.cross3=function(r,l,f){return(l.x-r.x)*(f.y-r.y)-(l.y-r.y)*(f.x-r.x)},u.add=function(r,l,f){return f||(f={}),f.x=r.x+l.x,f.y=r.y+l.y,f},u.sub=function(r,l,f){return f||(f={}),f.x=r.x-l.x,f.y=r.y-l.y,f},u.mult=function(r,l){return{x:r.x*l,y:r.y*l}},u.div=function(r,l){return{x:r.x/l,y:r.y/l}},u.perp=function(r,l){return l=l===!0?-1:1,{x:l*-r.y,y:l*r.x}},u.neg=function(r){return{x:-r.x,y:-r.y}},u.angle=function(r,l){return Math.atan2(l.y-r.y,l.x-r.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(m,C,u){var r={};m.exports=r;var l=u(2),f=u(0);(function(){r.create=function(s,v){for(var c=[],e=0;e<s.length;e++){var n=s[e],t={x:n.x,y:n.y,index:e,body:v,isInternal:!1};c.push(t)}return c},r.fromPath=function(s,v){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,e=[];return s.replace(c,function(n,t,i){e.push({x:parseFloat(t),y:parseFloat(i)})}),r.create(e,v)},r.centre=function(s){for(var v=r.area(s,!0),c={x:0,y:0},e,n,t,i=0;i<s.length;i++)t=(i+1)%s.length,e=l.cross(s[i],s[t]),n=l.mult(l.add(s[i],s[t]),e),c=l.add(c,n);return l.div(c,6*v)},r.mean=function(s){for(var v={x:0,y:0},c=0;c<s.length;c++)v.x+=s[c].x,v.y+=s[c].y;return l.div(v,s.length)},r.area=function(s,v){for(var c=0,e=s.length-1,n=0;n<s.length;n++)c+=(s[e].x-s[n].x)*(s[e].y+s[n].y),e=n;return v?c/2:Math.abs(c)/2},r.inertia=function(s,v){for(var c=0,e=0,n=s,t,i,a=0;a<n.length;a++)i=(a+1)%n.length,t=Math.abs(l.cross(n[i],n[a])),c+=t*(l.dot(n[i],n[i])+l.dot(n[i],n[a])+l.dot(n[a],n[a])),e+=t;return v/6*(c/e)},r.translate=function(s,v,c){c=typeof c<"u"?c:1;var e=s.length,n=v.x*c,t=v.y*c,i;for(i=0;i<e;i++)s[i].x+=n,s[i].y+=t;return s},r.rotate=function(s,v,c){if(v!==0){var e=Math.cos(v),n=Math.sin(v),t=c.x,i=c.y,a=s.length,o,d,g,S;for(S=0;S<a;S++)o=s[S],d=o.x-t,g=o.y-i,o.x=t+(d*e-g*n),o.y=i+(d*n+g*e);return s}},r.contains=function(s,v){for(var c=v.x,e=v.y,n=s.length,t=s[n-1],i,a=0;a<n;a++){if(i=s[a],(c-t.x)*(i.y-t.y)+(e-t.y)*(t.x-i.x)>0)return!1;t=i}return!0},r.scale=function(s,v,c,e){if(v===1&&c===1)return s;e=e||r.centre(s);for(var n,t,i=0;i<s.length;i++)n=s[i],t=l.sub(n,e),s[i].x=e.x+t.x*v,s[i].y=e.y+t.y*c;return s},r.chamfer=function(s,v,c,e,n){typeof v=="number"?v=[v]:v=v||[8],c=typeof c<"u"?c:-1,e=e||2,n=n||14;for(var t=[],i=0;i<s.length;i++){var a=s[i-1>=0?i-1:s.length-1],o=s[i],d=s[(i+1)%s.length],g=v[i<v.length?i:v.length-1];if(g===0){t.push(o);continue}var S=l.normalise({x:o.y-a.y,y:a.x-o.x}),A=l.normalise({x:d.y-o.y,y:o.x-d.x}),p=Math.sqrt(2*Math.pow(g,2)),h=l.mult(f.clone(S),g),y=l.normalise(l.mult(l.add(S,A),.5)),x=l.sub(o,l.mult(y,p)),_=c;c===-1&&(_=Math.pow(g,.32)*1.75),_=f.clamp(_,e,n),_%2===1&&(_+=1);for(var w=Math.acos(l.dot(S,A)),P=w/_,T=0;T<_;T++)t.push(l.add(l.rotate(h,P*T),x))}return t},r.clockwiseSort=function(s){var v=r.mean(s);return s.sort(function(c,e){return l.angle(v,c)-l.angle(v,e)}),s},r.isConvex=function(s){var v=0,c=s.length,e,n,t,i;if(c<3)return null;for(e=0;e<c;e++)if(n=(e+1)%c,t=(e+2)%c,i=(s[n].x-s[e].x)*(s[t].y-s[n].y),i-=(s[n].y-s[e].y)*(s[t].x-s[n].x),i<0?v|=1:i>0&&(v|=2),v===3)return!1;return v!==0?!0:null},r.hull=function(s){var v=[],c=[],e,n;for(s=s.slice(0),s.sort(function(t,i){var a=t.x-i.x;return a!==0?a:t.y-i.y}),n=0;n<s.length;n+=1){for(e=s[n];c.length>=2&&l.cross3(c[c.length-2],c[c.length-1],e)<=0;)c.pop();c.push(e)}for(n=s.length-1;n>=0;n-=1){for(e=s[n];v.length>=2&&l.cross3(v[v.length-2],v[v.length-1],e)<=0;)v.pop();v.push(e)}return v.pop(),c.pop(),v.concat(c)}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(2),s=u(7),v=u(0),c=u(1),e=u(11);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=1e3/60,r.create=function(t){var i={id:v.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},a=v.extend(i,t);return n(a,t),a},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var n=function(t,i){i=i||{},r.set(t,{bounds:t.bounds||c.create(t.vertices),positionPrev:t.positionPrev||f.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),e.rotate(t.axes,t.angle),c.update(t.bounds,t.vertices,t.velocity),r.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var a=t.isStatic?"#14151f":v.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),o=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||o,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};r.set=function(t,i,a){var o;typeof i=="string"&&(o=i,i={},i[o]=a);for(o in i)if(Object.prototype.hasOwnProperty.call(i,o))switch(a=i[o],o){case"isStatic":r.setStatic(t,a);break;case"isSleeping":s.set(t,a);break;case"mass":r.setMass(t,a);break;case"density":r.setDensity(t,a);break;case"inertia":r.setInertia(t,a);break;case"vertices":r.setVertices(t,a);break;case"position":r.setPosition(t,a);break;case"angle":r.setAngle(t,a);break;case"velocity":r.setVelocity(t,a);break;case"angularVelocity":r.setAngularVelocity(t,a);break;case"speed":r.setSpeed(t,a);break;case"angularSpeed":r.setAngularSpeed(t,a);break;case"parts":r.setParts(t,a);break;case"centre":r.setCentre(t,a);break;default:t[o]=a}},r.setStatic=function(t,i){for(var a=0;a<t.parts.length;a++){var o=t.parts[a];o.isStatic=i,i?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null)}},r.setMass=function(t,i){var a=t.inertia/(t.mass/6);t.inertia=a*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,i){r.setMass(t,i*t.area),t.density=i},r.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},r.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=l.create(i,t),t.axes=e.fromVertices(t.vertices),t.area=l.area(t.vertices),r.setMass(t,t.density*t.area);var a=l.centre(t.vertices);l.translate(t.vertices,a,-1),r.setInertia(t,r._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),c.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,i,a){var o;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<i.length;o++){var d=i[o];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(a=typeof a<"u"?a:!0,a){var g=[];for(o=0;o<i.length;o++)g=g.concat(i[o].vertices);l.clockwiseSort(g);var S=l.hull(g),A=l.centre(S);r.setVertices(t,S),l.translate(t.vertices,A)}var p=r._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,r.setMass(t,p.mass),r.setInertia(t,p.inertia),r.setPosition(t,p.centre)}},r.setCentre=function(t,i,a){a?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},r.setPosition=function(t,i,a){var o=f.sub(i,t.position);a?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=f.magnitude(o)):(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y);for(var d=0;d<t.parts.length;d++){var g=t.parts[d];g.position.x+=o.x,g.position.y+=o.y,l.translate(g.vertices,o),c.update(g.bounds,g.vertices,t.velocity)}},r.setAngle=function(t,i,a){var o=i-t.angle;a?(t.anglePrev=t.angle,t.angularVelocity=o,t.angularSpeed=Math.abs(o)):t.anglePrev+=o;for(var d=0;d<t.parts.length;d++){var g=t.parts[d];g.angle+=o,l.rotate(g.vertices,o,t.position),e.rotate(g.axes,o),c.update(g.bounds,g.vertices,t.velocity),d>0&&f.rotateAbout(g.position,o,t.position,g.position)}},r.setVelocity=function(t,i){var a=t.deltaTime/r._baseDelta;t.positionPrev.x=t.position.x-i.x*a,t.positionPrev.y=t.position.y-i.y*a,t.velocity.x=(t.position.x-t.positionPrev.x)/a,t.velocity.y=(t.position.y-t.positionPrev.y)/a,t.speed=f.magnitude(t.velocity)},r.getVelocity=function(t){var i=r._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*i,y:(t.position.y-t.positionPrev.y)*i}},r.getSpeed=function(t){return f.magnitude(r.getVelocity(t))},r.setSpeed=function(t,i){r.setVelocity(t,f.mult(f.normalise(r.getVelocity(t)),i))},r.setAngularVelocity=function(t,i){var a=t.deltaTime/r._baseDelta;t.anglePrev=t.angle-i*a,t.angularVelocity=(t.angle-t.anglePrev)/a,t.angularSpeed=Math.abs(t.angularVelocity)},r.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*r._baseDelta/t.deltaTime},r.getAngularSpeed=function(t){return Math.abs(r.getAngularVelocity(t))},r.setAngularSpeed=function(t,i){r.setAngularVelocity(t,v.sign(r.getAngularVelocity(t))*i)},r.translate=function(t,i,a){r.setPosition(t,f.add(t.position,i),a)},r.rotate=function(t,i,a,o){if(!a)r.setAngle(t,t.angle+i,o);else{var d=Math.cos(i),g=Math.sin(i),S=t.position.x-a.x,A=t.position.y-a.y;r.setPosition(t,{x:a.x+(S*d-A*g),y:a.y+(S*g+A*d)},o),r.setAngle(t,t.angle+i,o)}},r.scale=function(t,i,a,o){var d=0,g=0;o=o||t.position;for(var S=0;S<t.parts.length;S++){var A=t.parts[S];l.scale(A.vertices,i,a,o),A.axes=e.fromVertices(A.vertices),A.area=l.area(A.vertices),r.setMass(A,t.density*A.area),l.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),r.setInertia(A,r._inertiaScale*l.inertia(A.vertices,A.mass)),l.translate(A.vertices,{x:A.position.x,y:A.position.y}),S>0&&(d+=A.area,g+=A.inertia),A.position.x=o.x+(A.position.x-o.x)*i,A.position.y=o.y+(A.position.y-o.y)*a,c.update(A.bounds,A.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(r.setMass(t,t.density*d),r.setInertia(t,g))),t.circleRadius&&(i===a?t.circleRadius*=i:t.circleRadius=null)},r.update=function(t,i){i=(typeof i<"u"?i:1e3/60)*t.timeScale;var a=i*i,o=r._timeCorrection?i/(t.deltaTime||i):1,d=1-t.frictionAir*(i/v._baseDelta),g=(t.position.x-t.positionPrev.x)*o,S=(t.position.y-t.positionPrev.y)*o;t.velocity.x=g*d+t.force.x/t.mass*a,t.velocity.y=S*d+t.force.y/t.mass*a,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=i,t.angularVelocity=(t.angle-t.anglePrev)*d*o+t.torque/t.inertia*a,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var A=0;A<t.parts.length;A++){var p=t.parts[A];l.translate(p.vertices,t.velocity),A>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(p.vertices,t.angularVelocity,t.position),e.rotate(p.axes,t.angularVelocity),A>0&&f.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),c.update(p.bounds,p.vertices,t.velocity)}},r.updateVelocities=function(t){var i=r._baseDelta/t.deltaTime,a=t.velocity;a.x=(t.position.x-t.positionPrev.x)*i,a.y=(t.position.y-t.positionPrev.y)*i,t.speed=Math.sqrt(a.x*a.x+a.y*a.y),t.angularVelocity=(t.angle-t.anglePrev)*i,t.angularSpeed=Math.abs(t.angularVelocity)},r.applyForce=function(t,i,a){var o={x:i.x-t.position.x,y:i.y-t.position.y};t.force.x+=a.x,t.force.y+=a.y,t.torque+=o.x*a.y-o.y*a.x},r._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var o=t.parts[a],d=o.mass!==1/0?o.mass:1;i.mass+=d,i.area+=o.area,i.inertia+=o.inertia,i.centre=f.add(i.centre,f.mult(o.position,d))}return i.centre=f.div(i.centre,i.mass),i}})()},function(m,C,u){var r={};m.exports=r;var l=u(0);(function(){r.on=function(f,s,v){for(var c=s.split(" "),e,n=0;n<c.length;n++)e=c[n],f.events=f.events||{},f.events[e]=f.events[e]||[],f.events[e].push(v);return v},r.off=function(f,s,v){if(!s){f.events={};return}typeof s=="function"&&(v=s,s=l.keys(f.events).join(" "));for(var c=s.split(" "),e=0;e<c.length;e++){var n=f.events[c[e]],t=[];if(v&&n)for(var i=0;i<n.length;i++)n[i]!==v&&t.push(n[i]);f.events[c[e]]=t}},r.trigger=function(f,s,v){var c,e,n,t,i=f.events;if(i&&l.keys(i).length>0){v||(v={}),c=s.split(" ");for(var a=0;a<c.length;a++)if(e=c[a],n=i[e],n){t=l.clone(v,!1),t.name=e,t.source=f;for(var o=0;o<n.length;o++)n[o].apply(f,[t])}}}})()},function(m,C,u){var r={};m.exports=r;var l=u(5),f=u(0),s=u(1),v=u(4);(function(){r.create=function(c){return f.extend({id:f.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},r.setModified=function(c,e,n,t){if(c.isModified=e,e&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),n&&c.parent&&r.setModified(c.parent,e,n,t),t)for(var i=0;i<c.composites.length;i++){var a=c.composites[i];r.setModified(a,e,n,t)}},r.add=function(c,e){var n=[].concat(e);l.trigger(c,"beforeAdd",{object:e});for(var t=0;t<n.length;t++){var i=n[t];switch(i.type){case"body":if(i.parent!==i){f.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(c,i);break;case"constraint":r.addConstraint(c,i);break;case"composite":r.addComposite(c,i);break;case"mouseConstraint":r.addConstraint(c,i.constraint);break}}return l.trigger(c,"afterAdd",{object:e}),c},r.remove=function(c,e,n){var t=[].concat(e);l.trigger(c,"beforeRemove",{object:e});for(var i=0;i<t.length;i++){var a=t[i];switch(a.type){case"body":r.removeBody(c,a,n);break;case"constraint":r.removeConstraint(c,a,n);break;case"composite":r.removeComposite(c,a,n);break;case"mouseConstraint":r.removeConstraint(c,a.constraint);break}}return l.trigger(c,"afterRemove",{object:e}),c},r.addComposite=function(c,e){return c.composites.push(e),e.parent=c,r.setModified(c,!0,!0,!1),c},r.removeComposite=function(c,e,n){var t=f.indexOf(c.composites,e);if(t!==-1&&r.removeCompositeAt(c,t),n)for(var i=0;i<c.composites.length;i++)r.removeComposite(c.composites[i],e,!0);return c},r.removeCompositeAt=function(c,e){return c.composites.splice(e,1),r.setModified(c,!0,!0,!1),c},r.addBody=function(c,e){return c.bodies.push(e),r.setModified(c,!0,!0,!1),c},r.removeBody=function(c,e,n){var t=f.indexOf(c.bodies,e);if(t!==-1&&r.removeBodyAt(c,t),n)for(var i=0;i<c.composites.length;i++)r.removeBody(c.composites[i],e,!0);return c},r.removeBodyAt=function(c,e){return c.bodies.splice(e,1),r.setModified(c,!0,!0,!1),c},r.addConstraint=function(c,e){return c.constraints.push(e),r.setModified(c,!0,!0,!1),c},r.removeConstraint=function(c,e,n){var t=f.indexOf(c.constraints,e);if(t!==-1&&r.removeConstraintAt(c,t),n)for(var i=0;i<c.composites.length;i++)r.removeConstraint(c.composites[i],e,!0);return c},r.removeConstraintAt=function(c,e){return c.constraints.splice(e,1),r.setModified(c,!0,!0,!1),c},r.clear=function(c,e,n){if(n)for(var t=0;t<c.composites.length;t++)r.clear(c.composites[t],e,!0);return e?c.bodies=c.bodies.filter(function(i){return i.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,r.setModified(c,!0,!0,!1),c},r.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var e=[].concat(c.bodies),n=0;n<c.composites.length;n++)e=e.concat(r.allBodies(c.composites[n]));return c.cache&&(c.cache.allBodies=e),e},r.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var e=[].concat(c.constraints),n=0;n<c.composites.length;n++)e=e.concat(r.allConstraints(c.composites[n]));return c.cache&&(c.cache.allConstraints=e),e},r.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var e=[].concat(c.composites),n=0;n<c.composites.length;n++)e=e.concat(r.allComposites(c.composites[n]));return c.cache&&(c.cache.allComposites=e),e},r.get=function(c,e,n){var t,i;switch(n){case"body":t=r.allBodies(c);break;case"constraint":t=r.allConstraints(c);break;case"composite":t=r.allComposites(c).concat(c);break}return t?(i=t.filter(function(a){return a.id.toString()===e.toString()}),i.length===0?null:i[0]):null},r.move=function(c,e,n){return r.remove(c,e),r.add(n,e),c},r.rebase=function(c){for(var e=r.allBodies(c).concat(r.allConstraints(c)).concat(r.allComposites(c)),n=0;n<e.length;n++)e[n].id=f.nextId();return c},r.translate=function(c,e,n){for(var t=n?r.allBodies(c):c.bodies,i=0;i<t.length;i++)v.translate(t[i],e);return c},r.rotate=function(c,e,n,t){for(var i=Math.cos(e),a=Math.sin(e),o=t?r.allBodies(c):c.bodies,d=0;d<o.length;d++){var g=o[d],S=g.position.x-n.x,A=g.position.y-n.y;v.setPosition(g,{x:n.x+(S*i-A*a),y:n.y+(S*a+A*i)}),v.rotate(g,e)}return c},r.scale=function(c,e,n,t,i){for(var a=i?r.allBodies(c):c.bodies,o=0;o<a.length;o++){var d=a[o],g=d.position.x-t.x,S=d.position.y-t.y;v.setPosition(d,{x:t.x+g*e,y:t.y+S*n}),v.scale(d,e,n)}return c},r.bounds=function(c){for(var e=r.allBodies(c),n=[],t=0;t<e.length;t+=1){var i=e[t];n.push(i.bounds.min,i.bounds.max)}return s.create(n)}})()},function(m,C,u){var r={};m.exports=r;var l=u(4),f=u(5),s=u(0);(function(){r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(v,c){for(var e=c/s._baseDelta,n=r._motionSleepThreshold,t=0;t<v.length;t++){var i=v[t],a=l.getSpeed(i),o=l.getAngularSpeed(i),d=a*a+o*o;if(i.force.x!==0||i.force.y!==0){r.set(i,!1);continue}var g=Math.min(i.motion,d),S=Math.max(i.motion,d);i.motion=r._minBias*g+(1-r._minBias)*S,i.sleepThreshold>0&&i.motion<n?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold/e&&r.set(i,!0)):i.sleepCounter>0&&(i.sleepCounter-=1)}},r.afterCollisions=function(v){for(var c=r._motionSleepThreshold,e=0;e<v.length;e++){var n=v[e];if(n.isActive){var t=n.collision,i=t.bodyA.parent,a=t.bodyB.parent;if(!(i.isSleeping&&a.isSleeping||i.isStatic||a.isStatic)&&(i.isSleeping||a.isSleeping)){var o=i.isSleeping&&!i.isStatic?i:a,d=o===i?a:i;!o.isStatic&&d.motion>c&&r.set(o,!1)}}}},r.set=function(v,c){var e=v.isSleeping;c?(v.isSleeping=!0,v.sleepCounter=v.sleepThreshold,v.positionImpulse.x=0,v.positionImpulse.y=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.speed=0,v.angularSpeed=0,v.motion=0,e||f.trigger(v,"sleepStart")):(v.isSleeping=!1,v.sleepCounter=0,e&&f.trigger(v,"sleepEnd"))}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(9);(function(){var s=[],v={overlap:0,axis:null},c={overlap:0,axis:null};r.create=function(e,n){return{pair:null,collided:!1,bodyA:e,bodyB:n,parentA:e.parent,parentB:n.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},r.collides=function(e,n,t){if(r._overlapAxes(v,e.vertices,n.vertices,e.axes),v.overlap<=0||(r._overlapAxes(c,n.vertices,e.vertices,n.axes),c.overlap<=0))return null;var i=t&&t.table[f.id(e,n)],a;i?a=i.collision:(a=r.create(e,n),a.collided=!0,a.bodyA=e.id<n.id?e:n,a.bodyB=e.id<n.id?n:e,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),e=a.bodyA,n=a.bodyB;var o;v.overlap<c.overlap?o=v:o=c;var d=a.normal,g=a.supports,S=o.axis,A=S.x,p=S.y;A*(n.position.x-e.position.x)+p*(n.position.y-e.position.y)<0?(d.x=A,d.y=p):(d.x=-A,d.y=-p),a.tangent.x=-d.y,a.tangent.y=d.x,a.depth=o.overlap,a.penetration.x=d.x*a.depth,a.penetration.y=d.y*a.depth;var h=r._findSupports(e,n,d,1),y=0;if(l.contains(e.vertices,h[0])&&(g[y++]=h[0]),l.contains(e.vertices,h[1])&&(g[y++]=h[1]),y<2){var x=r._findSupports(n,e,d,-1);l.contains(n.vertices,x[0])&&(g[y++]=x[0]),y<2&&l.contains(n.vertices,x[1])&&(g[y++]=x[1])}return y===0&&(g[y++]=h[0]),g.length=y,a},r._overlapAxes=function(e,n,t,i){var a=n.length,o=t.length,d=n[0].x,g=n[0].y,S=t[0].x,A=t[0].y,p=i.length,h=Number.MAX_VALUE,y=0,x,_,w,P,T,M;for(T=0;T<p;T++){var I=i[T],B=I.x,k=I.y,L=d*B+g*k,E=S*B+A*k,F=L,R=E;for(M=1;M<a;M+=1)P=n[M].x*B+n[M].y*k,P>F?F=P:P<L&&(L=P);for(M=1;M<o;M+=1)P=t[M].x*B+t[M].y*k,P>R?R=P:P<E&&(E=P);if(_=F-E,w=R-L,x=_<w?_:w,x<h&&(h=x,y=T,x<=0))break}e.axis=i[y],e.overlap=h},r._projectToAxis=function(e,n,t){for(var i=n[0].x*t.x+n[0].y*t.y,a=i,o=1;o<n.length;o+=1){var d=n[o].x*t.x+n[o].y*t.y;d>a?a=d:d<i&&(i=d)}e.min=i,e.max=a},r._findSupports=function(e,n,t,i){var a=n.vertices,o=a.length,d=e.position.x,g=e.position.y,S=t.x*i,A=t.y*i,p=Number.MAX_VALUE,h,y,x,_,w;for(w=0;w<o;w+=1)y=a[w],_=S*(d-y.x)+A*(g-y.y),_<p&&(p=_,h=y);return x=a[(o+h.index-1)%o],p=S*(d-x.x)+A*(g-x.y),y=a[(h.index+1)%o],S*(d-y.x)+A*(g-y.y)<p?(s[0]=h,s[1]=y,s):(s[0]=h,s[1]=x,s)}})()},function(m,C,u){var r={};m.exports=r;var l=u(16);(function(){r.create=function(f,s){var v=f.bodyA,c=f.bodyB,e={id:r.id(v,c),bodyA:v,bodyB:c,collision:f,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:v.isSensor||c.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(e,f,s),e},r.update=function(f,s,v){var c=f.contacts,e=s.supports,n=f.activeContacts,t=s.parentA,i=s.parentB,a=t.vertices.length;f.isActive=!0,f.timeUpdated=v,f.collision=s,f.separation=s.depth,f.inverseMass=t.inverseMass+i.inverseMass,f.friction=t.friction<i.friction?t.friction:i.friction,f.frictionStatic=t.frictionStatic>i.frictionStatic?t.frictionStatic:i.frictionStatic,f.restitution=t.restitution>i.restitution?t.restitution:i.restitution,f.slop=t.slop>i.slop?t.slop:i.slop,s.pair=f,n.length=0;for(var o=0;o<e.length;o++){var d=e[o],g=d.body===t?d.index:a+d.index,S=c[g];S?n.push(S):n.push(c[g]=l.create(d))}},r.setActive=function(f,s,v){s?(f.isActive=!0,f.timeUpdated=v):(f.isActive=!1,f.activeContacts.length=0)},r.id=function(f,s){return f.id<s.id?"A"+f.id+"B"+s.id:"A"+s.id+"B"+f.id}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(2),s=u(7),v=u(1),c=u(11),e=u(0);(function(){r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(n){var t=n;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?f.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?f.add(t.bodyB.position,t.pointB):t.pointB,o=f.magnitude(f.sub(i,a));t.length=typeof t.length<"u"?t.length:o,t.id=t.id||e.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=e.extend(d,t.render),t},r.preSolveAll=function(n){for(var t=0;t<n.length;t+=1){var i=n[t],a=i.constraintImpulse;i.isStatic||a.x===0&&a.y===0&&a.angle===0||(i.position.x+=a.x,i.position.y+=a.y,i.angle+=a.angle)}},r.solveAll=function(n,t){for(var i=e.clamp(t/e._baseDelta,0,1),a=0;a<n.length;a+=1){var o=n[a],d=!o.bodyA||o.bodyA&&o.bodyA.isStatic,g=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(d||g)&&r.solve(n[a],i)}for(a=0;a<n.length;a+=1)o=n[a],d=!o.bodyA||o.bodyA&&o.bodyA.isStatic,g=!o.bodyB||o.bodyB&&o.bodyB.isStatic,!d&&!g&&r.solve(n[a],i)},r.solve=function(n,t){var i=n.bodyA,a=n.bodyB,o=n.pointA,d=n.pointB;if(!(!i&&!a)){i&&!i.isStatic&&(f.rotate(o,i.angle-n.angleA,o),n.angleA=i.angle),a&&!a.isStatic&&(f.rotate(d,a.angle-n.angleB,d),n.angleB=a.angle);var g=o,S=d;if(i&&(g=f.add(i.position,o)),a&&(S=f.add(a.position,d)),!(!g||!S)){var A=f.sub(g,S),p=f.magnitude(A);p<r._minLength&&(p=r._minLength);var h=(p-n.length)/p,y=n.stiffness>=1||n.length===0,x=y?n.stiffness*t:n.stiffness*t*t,_=n.damping*t,w=f.mult(A,h*x),P=(i?i.inverseMass:0)+(a?a.inverseMass:0),T=(i?i.inverseInertia:0)+(a?a.inverseInertia:0),M=P+T,I,B,k,L,E;if(_>0){var F=f.create();k=f.div(A,p),E=f.sub(a&&f.sub(a.position,a.positionPrev)||F,i&&f.sub(i.position,i.positionPrev)||F),L=f.dot(k,E)}i&&!i.isStatic&&(B=i.inverseMass/P,i.constraintImpulse.x-=w.x*B,i.constraintImpulse.y-=w.y*B,i.position.x-=w.x*B,i.position.y-=w.y*B,_>0&&(i.positionPrev.x-=_*k.x*L*B,i.positionPrev.y-=_*k.y*L*B),I=f.cross(o,w)/M*r._torqueDampen*i.inverseInertia*(1-n.angularStiffness),i.constraintImpulse.angle-=I,i.angle-=I),a&&!a.isStatic&&(B=a.inverseMass/P,a.constraintImpulse.x+=w.x*B,a.constraintImpulse.y+=w.y*B,a.position.x+=w.x*B,a.position.y+=w.y*B,_>0&&(a.positionPrev.x+=_*k.x*L*B,a.positionPrev.y+=_*k.y*L*B),I=f.cross(d,w)/M*r._torqueDampen*a.inverseInertia*(1-n.angularStiffness),a.constraintImpulse.angle+=I,a.angle+=I)}}},r.postSolveAll=function(n){for(var t=0;t<n.length;t++){var i=n[t],a=i.constraintImpulse;if(!(i.isStatic||a.x===0&&a.y===0&&a.angle===0)){s.set(i,!1);for(var o=0;o<i.parts.length;o++){var d=i.parts[o];l.translate(d.vertices,a),o>0&&(d.position.x+=a.x,d.position.y+=a.y),a.angle!==0&&(l.rotate(d.vertices,a.angle,i.position),c.rotate(d.axes,a.angle),o>0&&f.rotateAbout(d.position,a.angle,i.position,d.position)),v.update(d.bounds,d.vertices,i.velocity)}a.angle*=r._warming,a.x*=r._warming,a.y*=r._warming}}},r.pointAWorld=function(n){return{x:(n.bodyA?n.bodyA.position.x:0)+(n.pointA?n.pointA.x:0),y:(n.bodyA?n.bodyA.position.y:0)+(n.pointA?n.pointA.y:0)}},r.pointBWorld=function(n){return{x:(n.bodyB?n.bodyB.position.x:0)+(n.pointB?n.pointB.x:0),y:(n.bodyB?n.bodyB.position.y:0)+(n.pointB?n.pointB.y:0)}}})()},function(m,C,u){var r={};m.exports=r;var l=u(2),f=u(0);(function(){r.fromVertices=function(s){for(var v={},c=0;c<s.length;c++){var e=(c+1)%s.length,n=l.normalise({x:s[e].y-s[c].y,y:s[c].x-s[e].x}),t=n.y===0?1/0:n.x/n.y;t=t.toFixed(3).toString(),v[t]=n}return f.values(v)},r.rotate=function(s,v){if(v!==0)for(var c=Math.cos(v),e=Math.sin(v),n=0;n<s.length;n++){var t=s[n],i;i=t.x*c-t.y*e,t.y=t.x*e+t.y*c,t.x=i}}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(0),s=u(4),v=u(1),c=u(2);(function(){r.rectangle=function(e,n,t,i,a){a=a||{};var o={label:"Rectangle Body",position:{x:e,y:n},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(a.chamfer){var d=a.chamfer;o.vertices=l.chamfer(o.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete a.chamfer}return s.create(f.extend({},o,a))},r.trapezoid=function(e,n,t,i,a,o){o=o||{},a*=.5;var d=(1-a*2)*t,g=t*a,S=g+d,A=S+g,p;a<.5?p="L 0 0 L "+g+" "+-i+" L "+S+" "+-i+" L "+A+" 0":p="L 0 0 L "+S+" "+-i+" L "+A+" 0";var h={label:"Trapezoid Body",position:{x:e,y:n},vertices:l.fromPath(p)};if(o.chamfer){var y=o.chamfer;h.vertices=l.chamfer(h.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete o.chamfer}return s.create(f.extend({},h,o))},r.circle=function(e,n,t,i,a){i=i||{};var o={label:"Circle Body",circleRadius:t};a=a||25;var d=Math.ceil(Math.max(10,Math.min(a,t)));return d%2===1&&(d+=1),r.polygon(e,n,d,t,f.extend({},o,i))},r.polygon=function(e,n,t,i,a){if(a=a||{},t<3)return r.circle(e,n,i,a);for(var o=2*Math.PI/t,d="",g=o*.5,S=0;S<t;S+=1){var A=g+S*o,p=Math.cos(A)*i,h=Math.sin(A)*i;d+="L "+p.toFixed(3)+" "+h.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:e,y:n},vertices:l.fromPath(d)};if(a.chamfer){var x=a.chamfer;y.vertices=l.chamfer(y.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete a.chamfer}return s.create(f.extend({},y,a))},r.fromVertices=function(e,n,t,i,a,o,d,g){var S=f.getDecomp(),A,p,h,y,x,_,w,P,T,M,I;for(A=!!(S&&S.quickDecomp),i=i||{},h=[],a=typeof a<"u"?a:!1,o=typeof o<"u"?o:.01,d=typeof d<"u"?d:10,g=typeof g<"u"?g:.01,f.isArray(t[0])||(t=[t]),M=0;M<t.length;M+=1)if(_=t[M],y=l.isConvex(_),x=!y,x&&!A&&f.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!A)y?_=l.clockwiseSort(_):_=l.hull(_),h.push({position:{x:e,y:n},vertices:_});else{var B=_.map(function(G){return[G.x,G.y]});S.makeCCW(B),o!==!1&&S.removeCollinearPoints(B,o),g!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(B,g);var k=S.quickDecomp(B);for(w=0;w<k.length;w++){var L=k[w],E=L.map(function(G){return{x:G[0],y:G[1]}});d>0&&l.area(E)<d||h.push({position:l.centre(E),vertices:E})}}for(w=0;w<h.length;w++)h[w]=s.create(f.extend(h[w],i));if(a){var F=5;for(w=0;w<h.length;w++){var R=h[w];for(P=w+1;P<h.length;P++){var N=h[P];if(v.overlaps(R.bounds,N.bounds)){var O=R.vertices,W=N.vertices;for(T=0;T<R.vertices.length;T++)for(I=0;I<N.vertices.length;I++){var b=c.magnitudeSquared(c.sub(O[(T+1)%O.length],W[I])),$=c.magnitudeSquared(c.sub(O[T],W[(I+1)%W.length]));b<F&&$<F&&(O[T].isInternal=!0,W[I].isInternal=!0)}}}}}return h.length>1?(p=s.create(f.extend({parts:h.slice(0)},i)),s.setPosition(p,{x:e,y:n}),p):h[0]}})()},function(m,C,u){var r={};m.exports=r;var l=u(0),f=u(8);(function(){r.create=function(s){var v={bodies:[],pairs:null};return l.extend(v,s)},r.setBodies=function(s,v){s.bodies=v.slice(0)},r.clear=function(s){s.bodies=[]},r.collisions=function(s){var v=[],c=s.pairs,e=s.bodies,n=e.length,t=r.canCollide,i=f.collides,a,o;for(e.sort(r._compareBoundsX),a=0;a<n;a++){var d=e[a],g=d.bounds,S=d.bounds.max.x,A=d.bounds.max.y,p=d.bounds.min.y,h=d.isStatic||d.isSleeping,y=d.parts.length,x=y===1;for(o=a+1;o<n;o++){var _=e[o],w=_.bounds;if(w.min.x>S)break;if(!(A<w.min.y||p>w.max.y)&&!(h&&(_.isStatic||_.isSleeping))&&t(d.collisionFilter,_.collisionFilter)){var P=_.parts.length;if(x&&P===1){var T=i(d,_,c);T&&v.push(T)}else for(var M=y>1?1:0,I=P>1?1:0,B=M;B<y;B++)for(var k=d.parts[B],g=k.bounds,L=I;L<P;L++){var E=_.parts[L],w=E.bounds;if(!(g.min.x>w.max.x||g.max.x<w.min.x||g.max.y<w.min.y||g.min.y>w.max.y)){var T=i(k,E,c);T&&v.push(T)}}}}}return v},r.canCollide=function(s,v){return s.group===v.group&&s.group!==0?s.group>0:(s.mask&v.category)!==0&&(v.mask&s.category)!==0},r._compareBoundsX=function(s,v){return s.bounds.min.x-v.bounds.min.x}})()},function(m,C,u){var r={};m.exports=r;var l=u(0);(function(){r.create=function(f){var s={};return f||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=f||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(v){var c=r._getRelativeMousePosition(v,s.element,s.pixelRatio),e=v.changedTouches;e&&(s.button=0,v.preventDefault()),s.absolute.x=c.x,s.absolute.y=c.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=v},s.mousedown=function(v){var c=r._getRelativeMousePosition(v,s.element,s.pixelRatio),e=v.changedTouches;e?(s.button=0,v.preventDefault()):s.button=v.button,s.absolute.x=c.x,s.absolute.y=c.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=v},s.mouseup=function(v){var c=r._getRelativeMousePosition(v,s.element,s.pixelRatio),e=v.changedTouches;e&&v.preventDefault(),s.button=-1,s.absolute.x=c.x,s.absolute.y=c.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=v},s.mousewheel=function(v){s.wheelDelta=Math.max(-1,Math.min(1,v.wheelDelta||-v.detail)),v.preventDefault()},r.setElement(s,s.element),s},r.setElement=function(f,s){f.element=s,s.addEventListener("mousemove",f.mousemove),s.addEventListener("mousedown",f.mousedown),s.addEventListener("mouseup",f.mouseup),s.addEventListener("mousewheel",f.mousewheel),s.addEventListener("DOMMouseScroll",f.mousewheel),s.addEventListener("touchmove",f.mousemove),s.addEventListener("touchstart",f.mousedown),s.addEventListener("touchend",f.mouseup)},r.clearSourceEvents=function(f){f.sourceEvents.mousemove=null,f.sourceEvents.mousedown=null,f.sourceEvents.mouseup=null,f.sourceEvents.mousewheel=null,f.wheelDelta=0},r.setOffset=function(f,s){f.offset.x=s.x,f.offset.y=s.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y},r.setScale=function(f,s){f.scale.x=s.x,f.scale.y=s.y,f.position.x=f.absolute.x*f.scale.x+f.offset.x,f.position.y=f.absolute.y*f.scale.y+f.offset.y},r._getRelativeMousePosition=function(f,s,v){var c=s.getBoundingClientRect(),e=document.documentElement||document.body.parentNode||document.body,n=window.pageXOffset!==void 0?window.pageXOffset:e.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:e.scrollTop,i=f.changedTouches,a,o;return i?(a=i[0].pageX-c.left-n,o=i[0].pageY-c.top-t):(a=f.pageX-c.left-n,o=f.pageY-c.top-t),{x:a/(s.clientWidth/(s.width||s.clientWidth)*v),y:o/(s.clientHeight/(s.height||s.clientHeight)*v)}}})()},function(m,C,u){var r={};m.exports=r;var l=u(0);(function(){r._registry={},r.register=function(f){if(r.isPlugin(f)||l.warn("Plugin.register:",r.toString(f),"does not implement all required fields."),f.name in r._registry){var s=r._registry[f.name],v=r.versionParse(f.version).number,c=r.versionParse(s.version).number;v>c?(l.warn("Plugin.register:",r.toString(s),"was upgraded to",r.toString(f)),r._registry[f.name]=f):v<c?l.warn("Plugin.register:",r.toString(s),"can not be downgraded to",r.toString(f)):f!==s&&l.warn("Plugin.register:",r.toString(f),"is already registered to different plugin object")}else r._registry[f.name]=f;return f},r.resolve=function(f){return r._registry[r.dependencyParse(f).name]},r.toString=function(f){return typeof f=="string"?f:(f.name||"anonymous")+"@"+(f.version||f.range||"0.0.0")},r.isPlugin=function(f){return f&&f.name&&f.version&&f.install},r.isUsed=function(f,s){return f.used.indexOf(s)>-1},r.isFor=function(f,s){var v=f.for&&r.dependencyParse(f.for);return!f.for||s.name===v.name&&r.versionSatisfies(s.version,v.range)},r.use=function(f,s){if(f.uses=(f.uses||[]).concat(s||[]),f.uses.length===0){l.warn("Plugin.use:",r.toString(f),"does not specify any dependencies to install.");return}for(var v=r.dependencies(f),c=l.topologicalSort(v),e=[],n=0;n<c.length;n+=1)if(c[n]!==f.name){var t=r.resolve(c[n]);if(!t){e.push("âŒ "+c[n]);continue}r.isUsed(f,t.name)||(r.isFor(t,f)||(l.warn("Plugin.use:",r.toString(t),"is for",t.for,"but installed on",r.toString(f)+"."),t._warned=!0),t.install?t.install(f):(l.warn("Plugin.use:",r.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(e.push("ðŸ”¶ "+r.toString(t)),delete t._warned):e.push("âœ… "+r.toString(t)),f.used.push(t.name))}e.length>0&&l.info(e.join("  "))},r.dependencies=function(f,s){var v=r.dependencyParse(f),c=v.name;if(s=s||{},!(c in s)){f=r.resolve(f)||f,s[c]=l.map(f.uses||[],function(n){r.isPlugin(n)&&r.register(n);var t=r.dependencyParse(n),i=r.resolve(n);return i&&!r.versionSatisfies(i.version,t.range)?(l.warn("Plugin.dependencies:",r.toString(i),"does not satisfy",r.toString(t),"used by",r.toString(v)+"."),i._warned=!0,f._warned=!0):i||(l.warn("Plugin.dependencies:",r.toString(n),"used by",r.toString(v),"could not be resolved."),f._warned=!0),t.name});for(var e=0;e<s[c].length;e+=1)r.dependencies(s[c][e],s);return s}},r.dependencyParse=function(f){if(l.isString(f)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(f)||l.warn("Plugin.dependencyParse:",f,"is not a valid dependency string."),{name:f.split("@")[0],range:f.split("@")[1]||"*"}}return{name:f.name,range:f.range||f.version}},r.versionParse=function(f){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(f)||l.warn("Plugin.versionParse:",f,"is not a valid version or range.");var v=s.exec(f),c=Number(v[4]),e=Number(v[5]),n=Number(v[6]);return{isRange:!!(v[1]||v[2]),version:v[3],range:f,operator:v[1]||v[2]||"",major:c,minor:e,patch:n,parts:[c,e,n],prerelease:v[7],number:c*1e8+e*1e4+n}},r.versionSatisfies=function(f,s){s=s||"*";var v=r.versionParse(s),c=r.versionParse(f);if(v.isRange){if(v.operator==="*"||f==="*")return!0;if(v.operator===">")return c.number>v.number;if(v.operator===">=")return c.number>=v.number;if(v.operator==="~")return c.major===v.major&&c.minor===v.minor&&c.patch>=v.patch;if(v.operator==="^")return v.major>0?c.major===v.major&&c.number>=v.number:v.minor>0?c.minor===v.minor&&c.patch>=v.patch:c.patch===v.patch}return f===s||f==="*"}})()},function(m,C){var u={};m.exports=u,function(){u.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}}()},function(m,C,u){var r={};m.exports=r;var l=u(7),f=u(18),s=u(13),v=u(19),c=u(5),e=u(6),n=u(10),t=u(0),i=u(4);(function(){r.create=function(a){a=a||{};var o={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(o,a);return d.world=a.world||e.create({label:"World"}),d.pairs=a.pairs||v.create(),d.detector=a.detector||s.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},r.update=function(a,o){var d=t.now(),g=a.world,S=a.detector,A=a.pairs,p=a.timing,h=p.timestamp,y;o=typeof o<"u"?o:t._baseDelta,o*=p.timeScale,p.timestamp+=o,p.lastDelta=o;var x={timestamp:p.timestamp,delta:o};c.trigger(a,"beforeUpdate",x);var _=e.allBodies(g),w=e.allConstraints(g);for(g.isModified&&(s.setBodies(S,_),e.setModified(g,!1,!1,!0)),a.enableSleeping&&l.update(_,o),r._bodiesApplyGravity(_,a.gravity),o>0&&r._bodiesUpdate(_,o),n.preSolveAll(_),y=0;y<a.constraintIterations;y++)n.solveAll(w,o);n.postSolveAll(_),S.pairs=a.pairs;var P=s.collisions(S);v.update(A,P,h),a.enableSleeping&&l.afterCollisions(A.list),A.collisionStart.length>0&&c.trigger(a,"collisionStart",{pairs:A.collisionStart});var T=t.clamp(20/a.positionIterations,0,1);for(f.preSolvePosition(A.list),y=0;y<a.positionIterations;y++)f.solvePosition(A.list,o,T);for(f.postSolvePosition(_),n.preSolveAll(_),y=0;y<a.constraintIterations;y++)n.solveAll(w,o);for(n.postSolveAll(_),f.preSolveVelocity(A.list),y=0;y<a.velocityIterations;y++)f.solveVelocity(A.list,o);return r._bodiesUpdateVelocities(_),A.collisionActive.length>0&&c.trigger(a,"collisionActive",{pairs:A.collisionActive}),A.collisionEnd.length>0&&c.trigger(a,"collisionEnd",{pairs:A.collisionEnd}),r._bodiesClearForces(_),c.trigger(a,"afterUpdate",x),a.timing.lastElapsed=t.now()-d,a},r.merge=function(a,o){if(t.extend(a,o),o.world){a.world=o.world,r.clear(a);for(var d=e.allBodies(a.world),g=0;g<d.length;g++){var S=d[g];l.set(S,!1),S.id=t.nextId()}}},r.clear=function(a){v.clear(a.pairs),s.clear(a.detector)},r._bodiesClearForces=function(a){for(var o=a.length,d=0;d<o;d++){var g=a[d];g.force.x=0,g.force.y=0,g.torque=0}},r._bodiesApplyGravity=function(a,o){var d=typeof o.scale<"u"?o.scale:.001,g=a.length;if(!(o.x===0&&o.y===0||d===0))for(var S=0;S<g;S++){var A=a[S];A.isStatic||A.isSleeping||(A.force.y+=A.mass*o.y*d,A.force.x+=A.mass*o.x*d)}},r._bodiesUpdate=function(a,o){for(var d=a.length,g=0;g<d;g++){var S=a[g];S.isStatic||S.isSleeping||i.update(S,o)}},r._bodiesUpdateVelocities=function(a){for(var o=a.length,d=0;d<o;d++)i.updateVelocities(a[d])}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(0),s=u(1);(function(){r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(v){var c,e,n,t=v.length;for(c=0;c<t;c++)e=v[c],e.isActive&&(n=e.activeContacts.length,e.collision.parentA.totalContacts+=n,e.collision.parentB.totalContacts+=n)},r.solvePosition=function(v,c,e){var n,t,i,a,o,d,g,S,A=r._positionDampen*(e||1),p=f.clamp(c/f._baseDelta,0,1),h=v.length;for(n=0;n<h;n++)t=v[n],!(!t.isActive||t.isSensor)&&(i=t.collision,a=i.parentA,o=i.parentB,d=i.normal,t.separation=d.x*(o.positionImpulse.x+i.penetration.x-a.positionImpulse.x)+d.y*(o.positionImpulse.y+i.penetration.y-a.positionImpulse.y));for(n=0;n<h;n++)t=v[n],!(!t.isActive||t.isSensor)&&(i=t.collision,a=i.parentA,o=i.parentB,d=i.normal,S=t.separation-t.slop*p,(a.isStatic||o.isStatic)&&(S*=2),a.isStatic||a.isSleeping||(g=A/a.totalContacts,a.positionImpulse.x+=d.x*S*g,a.positionImpulse.y+=d.y*S*g),o.isStatic||o.isSleeping||(g=A/o.totalContacts,o.positionImpulse.x-=d.x*S*g,o.positionImpulse.y-=d.y*S*g))},r.postSolvePosition=function(v){for(var c=r._positionWarming,e=v.length,n=l.translate,t=s.update,i=0;i<e;i++){var a=v[i],o=a.positionImpulse,d=o.x,g=o.y,S=a.velocity;if(a.totalContacts=0,d!==0||g!==0){for(var A=0;A<a.parts.length;A++){var p=a.parts[A];n(p.vertices,o),t(p.bounds,p.vertices,S),p.position.x+=d,p.position.y+=g}a.positionPrev.x+=d,a.positionPrev.y+=g,d*S.x+g*S.y<0?(o.x=0,o.y=0):(o.x*=c,o.y*=c)}}},r.preSolveVelocity=function(v){var c=v.length,e,n;for(e=0;e<c;e++){var t=v[e];if(!(!t.isActive||t.isSensor)){var i=t.activeContacts,a=i.length,o=t.collision,d=o.parentA,g=o.parentB,S=o.normal,A=o.tangent;for(n=0;n<a;n++){var p=i[n],h=p.vertex,y=p.normalImpulse,x=p.tangentImpulse;if(y!==0||x!==0){var _=S.x*y+A.x*x,w=S.y*y+A.y*x;d.isStatic||d.isSleeping||(d.positionPrev.x+=_*d.inverseMass,d.positionPrev.y+=w*d.inverseMass,d.anglePrev+=d.inverseInertia*((h.x-d.position.x)*w-(h.y-d.position.y)*_)),g.isStatic||g.isSleeping||(g.positionPrev.x-=_*g.inverseMass,g.positionPrev.y-=w*g.inverseMass,g.anglePrev-=g.inverseInertia*((h.x-g.position.x)*w-(h.y-g.position.y)*_))}}}}},r.solveVelocity=function(v,c){var e=c/f._baseDelta,n=e*e,t=n*e,i=-r._restingThresh*e,a=r._restingThreshTangent,o=r._frictionNormalMultiplier*e,d=r._frictionMaxStatic,g=v.length,S,A,p,h;for(p=0;p<g;p++){var y=v[p];if(!(!y.isActive||y.isSensor)){var x=y.collision,_=x.parentA,w=x.parentB,P=_.velocity,T=w.velocity,M=x.normal.x,I=x.normal.y,B=x.tangent.x,k=x.tangent.y,L=y.activeContacts,E=L.length,F=1/E,R=_.inverseMass+w.inverseMass,N=y.friction*y.frictionStatic*o;for(P.x=_.position.x-_.positionPrev.x,P.y=_.position.y-_.positionPrev.y,T.x=w.position.x-w.positionPrev.x,T.y=w.position.y-w.positionPrev.y,_.angularVelocity=_.angle-_.anglePrev,w.angularVelocity=w.angle-w.anglePrev,h=0;h<E;h++){var O=L[h],W=O.vertex,b=W.x-_.position.x,$=W.y-_.position.y,G=W.x-w.position.x,U=W.y-w.position.y,Q=P.x-$*_.angularVelocity,ue=P.y+b*_.angularVelocity,ce=T.x-U*w.angularVelocity,de=T.y+G*w.angularVelocity,ne=Q-ce,re=ue-de,j=M*ne+I*re,Z=B*ne+k*re,ie=y.separation+j,ee=Math.min(ie,1);ee=ie<0?0:ee;var ae=ee*N;Z<-ae||Z>ae?(A=Z>0?Z:-Z,S=y.friction*(Z>0?1:-1)*t,S<-A?S=-A:S>A&&(S=A)):(S=Z,A=d);var oe=b*I-$*M,se=G*I-U*M,le=F/(R+_.inverseInertia*oe*oe+w.inverseInertia*se*se),J=(1+y.restitution)*j*le;if(S*=le,j<i)O.normalImpulse=0;else{var ve=O.normalImpulse;O.normalImpulse+=J,O.normalImpulse>0&&(O.normalImpulse=0),J=O.normalImpulse-ve}if(Z<-a||Z>a)O.tangentImpulse=0;else{var pe=O.tangentImpulse;O.tangentImpulse+=S,O.tangentImpulse<-A&&(O.tangentImpulse=-A),O.tangentImpulse>A&&(O.tangentImpulse=A),S=O.tangentImpulse-pe}var z=M*J+B*S,q=I*J+k*S;_.isStatic||_.isSleeping||(_.positionPrev.x+=z*_.inverseMass,_.positionPrev.y+=q*_.inverseMass,_.anglePrev+=(b*q-$*z)*_.inverseInertia),w.isStatic||w.isSleeping||(w.positionPrev.x-=z*w.inverseMass,w.positionPrev.y-=q*w.inverseMass,w.anglePrev-=(G*q-U*z)*w.inverseInertia)}}}}})()},function(m,C,u){var r={};m.exports=r;var l=u(9),f=u(0);(function(){r.create=function(s){return f.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},r.update=function(s,v,c){var e=s.list,n=e.length,t=s.table,i=v.length,a=s.collisionStart,o=s.collisionEnd,d=s.collisionActive,g,S,A,p;for(a.length=0,o.length=0,d.length=0,p=0;p<n;p++)e[p].confirmedActive=!1;for(p=0;p<i;p++)g=v[p],A=g.pair,A?(A.isActive?d.push(A):a.push(A),l.update(A,g,c),A.confirmedActive=!0):(A=l.create(g,c),t[A.id]=A,a.push(A),e.push(A));var h=[];for(n=e.length,p=0;p<n;p++)A=e[p],A.confirmedActive||(l.setActive(A,!1,c),o.push(A),!A.collision.bodyA.isSleeping&&!A.collision.bodyB.isSleeping&&h.push(p));for(p=0;p<h.length;p++)S=h[p]-p,A=e[S],e.splice(S,1),delete t[A.id]},r.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(m,C,u){var r=m.exports=u(21);r.Axes=u(11),r.Bodies=u(12),r.Body=u(4),r.Bounds=u(1),r.Collision=u(8),r.Common=u(0),r.Composite=u(6),r.Composites=u(22),r.Constraint=u(10),r.Contact=u(16),r.Detector=u(13),r.Engine=u(17),r.Events=u(5),r.Grid=u(23),r.Mouse=u(14),r.MouseConstraint=u(24),r.Pair=u(9),r.Pairs=u(19),r.Plugin=u(15),r.Query=u(25),r.Render=u(26),r.Resolver=u(18),r.Runner=u(27),r.SAT=u(28),r.Sleeping=u(7),r.Svg=u(29),r.Vector=u(2),r.Vertices=u(3),r.World=u(30),r.Engine.run=r.Runner.run,r.Common.deprecated(r.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")},function(m,C,u){var r={};m.exports=r;var l=u(15),f=u(0);(function(){r.name="matter-js",r.version="0.19.0",r.uses=[],r.used=[],r.use=function(){l.use(r,Array.prototype.slice.call(arguments))},r.before=function(s,v){return s=s.replace(/^Matter./,""),f.chainPathBefore(r,s,v)},r.after=function(s,v){return s=s.replace(/^Matter./,""),f.chainPathAfter(r,s,v)}})()},function(m,C,u){var r={};m.exports=r;var l=u(6),f=u(10),s=u(0),v=u(4),c=u(12),e=s.deprecated;(function(){r.stack=function(n,t,i,a,o,d,g){for(var S=l.create({label:"Stack"}),A=n,p=t,h,y=0,x=0;x<a;x++){for(var _=0,w=0;w<i;w++){var P=g(A,p,w,x,h,y);if(P){var T=P.bounds.max.y-P.bounds.min.y,M=P.bounds.max.x-P.bounds.min.x;T>_&&(_=T),v.translate(P,{x:M*.5,y:T*.5}),A=P.bounds.max.x+o,l.addBody(S,P),h=P,y+=1}else A+=o}p+=_+d,A=n}return S},r.chain=function(n,t,i,a,o,d){for(var g=n.bodies,S=1;S<g.length;S++){var A=g[S-1],p=g[S],h=A.bounds.max.y-A.bounds.min.y,y=A.bounds.max.x-A.bounds.min.x,x=p.bounds.max.y-p.bounds.min.y,_=p.bounds.max.x-p.bounds.min.x,w={bodyA:A,pointA:{x:y*t,y:h*i},bodyB:p,pointB:{x:_*a,y:x*o}},P=s.extend(w,d);l.addConstraint(n,f.create(P))}return n.label+=" Chain",n},r.mesh=function(n,t,i,a,o){var d=n.bodies,g,S,A,p,h;for(g=0;g<i;g++){for(S=1;S<t;S++)A=d[S-1+g*t],p=d[S+g*t],l.addConstraint(n,f.create(s.extend({bodyA:A,bodyB:p},o)));if(g>0)for(S=0;S<t;S++)A=d[S+(g-1)*t],p=d[S+g*t],l.addConstraint(n,f.create(s.extend({bodyA:A,bodyB:p},o))),a&&S>0&&(h=d[S-1+(g-1)*t],l.addConstraint(n,f.create(s.extend({bodyA:h,bodyB:p},o)))),a&&S<t-1&&(h=d[S+1+(g-1)*t],l.addConstraint(n,f.create(s.extend({bodyA:h,bodyB:p},o))))}return n.label+=" Mesh",n},r.pyramid=function(n,t,i,a,o,d,g){return r.stack(n,t,i,a,o,d,function(S,A,p,h,y,x){var _=Math.min(a,Math.ceil(i/2)),w=y?y.bounds.max.x-y.bounds.min.x:0;if(!(h>_)){h=_-h;var P=h,T=i-1-h;if(!(p<P||p>T)){x===1&&v.translate(y,{x:(p+(i%2===1?1:-1))*w,y:0});var M=y?p*w:0;return g(n+M+p*o,A,p,h,y,x)}}})},r.newtonsCradle=function(n,t,i,a,o){for(var d=l.create({label:"Newtons Cradle"}),g=0;g<i;g++){var S=1.9,A=c.circle(n+g*(a*S),t+o,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=f.create({pointA:{x:n+g*(a*S),y:t},bodyB:A});l.addBody(d,A),l.addConstraint(d,p)}return d},e(r,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),r.car=function(n,t,i,a,o){var d=v.nextGroup(!0),g=20,S=-i*.5+g,A=i*.5-g,p=0,h=l.create({label:"Car"}),y=c.rectangle(n,t,i,a,{collisionFilter:{group:d},chamfer:{radius:a*.5},density:2e-4}),x=c.circle(n+S,t+p,o,{collisionFilter:{group:d},friction:.8}),_=c.circle(n+A,t+p,o,{collisionFilter:{group:d},friction:.8}),w=f.create({bodyB:y,pointB:{x:S,y:p},bodyA:x,stiffness:1,length:0}),P=f.create({bodyB:y,pointB:{x:A,y:p},bodyA:_,stiffness:1,length:0});return l.addBody(h,y),l.addBody(h,x),l.addBody(h,_),l.addConstraint(h,w),l.addConstraint(h,P),h},e(r,"car","Composites.car âž¤ moved to car example"),r.softBody=function(n,t,i,a,o,d,g,S,A,p){A=s.extend({inertia:1/0},A),p=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var h=r.stack(n,t,i,a,o,d,function(y,x){return c.circle(y,x,S,A)});return r.mesh(h,i,a,g,p),h.label="Soft Body",h},e(r,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")})()},function(m,C,u){var r={};m.exports=r;var l=u(9),f=u(0),s=f.deprecated;(function(){r.create=function(v){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return f.extend(c,v)},r.update=function(v,c,e,n){var t,i,a,o=e.world,d=v.buckets,g,S,A=!1;for(t=0;t<c.length;t++){var p=c[t];if(!(p.isSleeping&&!n)&&!(o.bounds&&(p.bounds.max.x<o.bounds.min.x||p.bounds.min.x>o.bounds.max.x||p.bounds.max.y<o.bounds.min.y||p.bounds.min.y>o.bounds.max.y))){var h=r._getRegion(v,p);if(!p.region||h.id!==p.region.id||n){(!p.region||n)&&(p.region=h);var y=r._regionUnion(h,p.region);for(i=y.startCol;i<=y.endCol;i++)for(a=y.startRow;a<=y.endRow;a++){S=r._getBucketId(i,a),g=d[S];var x=i>=h.startCol&&i<=h.endCol&&a>=h.startRow&&a<=h.endRow,_=i>=p.region.startCol&&i<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!x&&_&&_&&g&&r._bucketRemoveBody(v,g,p),(p.region===h||x&&!_||n)&&(g||(g=r._createBucket(d,S)),r._bucketAddBody(v,g,p))}p.region=h,A=!0}}}A&&(v.pairsList=r._createActivePairsList(v))},s(r,"update","Grid.update âž¤ replaced by Matter.Detector"),r.clear=function(v){v.buckets={},v.pairs={},v.pairsList=[]},s(r,"clear","Grid.clear âž¤ replaced by Matter.Detector"),r._regionUnion=function(v,c){var e=Math.min(v.startCol,c.startCol),n=Math.max(v.endCol,c.endCol),t=Math.min(v.startRow,c.startRow),i=Math.max(v.endRow,c.endRow);return r._createRegion(e,n,t,i)},r._getRegion=function(v,c){var e=c.bounds,n=Math.floor(e.min.x/v.bucketWidth),t=Math.floor(e.max.x/v.bucketWidth),i=Math.floor(e.min.y/v.bucketHeight),a=Math.floor(e.max.y/v.bucketHeight);return r._createRegion(n,t,i,a)},r._createRegion=function(v,c,e,n){return{id:v+","+c+","+e+","+n,startCol:v,endCol:c,startRow:e,endRow:n}},r._getBucketId=function(v,c){return"C"+v+"R"+c},r._createBucket=function(v,c){var e=v[c]=[];return e},r._bucketAddBody=function(v,c,e){var n=v.pairs,t=l.id,i=c.length,a;for(a=0;a<i;a++){var o=c[a];if(!(e.id===o.id||e.isStatic&&o.isStatic)){var d=t(e,o),g=n[d];g?g[2]+=1:n[d]=[e,o,1]}}c.push(e)},r._bucketRemoveBody=function(v,c,e){var n=v.pairs,t=l.id,i;c.splice(f.indexOf(c,e),1);var a=c.length;for(i=0;i<a;i++){var o=n[t(e,c[i])];o&&(o[2]-=1)}},r._createActivePairsList=function(v){var c,e=v.pairs,n=f.keys(e),t=n.length,i=[],a;for(a=0;a<t;a++)c=e[n[a]],c[2]>0?i.push(c):delete e[n[a]];return i}})()},function(m,C,u){var r={};m.exports=r;var l=u(3),f=u(7),s=u(14),v=u(5),c=u(13),e=u(10),n=u(6),t=u(0),i=u(1);(function(){r.create=function(a,o){var d=(a?a.mouse:null)||(o?o.mouse:null);d||(a&&a.render&&a.render.canvas?d=s.create(a.render.canvas):o&&o.element?d=s.create(o.element):(d=s.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var g=e.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:g,collisionFilter:{category:1,mask:4294967295,group:0}},A=t.extend(S,o);return v.on(a,"beforeUpdate",function(){var p=n.allBodies(a.world);r.update(A,p),r._triggerEvents(A)}),A},r.update=function(a,o){var d=a.mouse,g=a.constraint,S=a.body;if(d.button===0){if(g.bodyB)f.set(g.bodyB,!1),g.pointA=d.position;else for(var A=0;A<o.length;A++)if(S=o[A],i.contains(S.bounds,d.position)&&c.canCollide(S.collisionFilter,a.collisionFilter))for(var p=S.parts.length>1?1:0;p<S.parts.length;p++){var h=S.parts[p];if(l.contains(h.vertices,d.position)){g.pointA=d.position,g.bodyB=a.body=S,g.pointB={x:d.position.x-S.position.x,y:d.position.y-S.position.y},g.angleB=S.angle,f.set(S,!1),v.trigger(a,"startdrag",{mouse:d,body:S});break}}}else g.bodyB=a.body=null,g.pointB=null,S&&v.trigger(a,"enddrag",{mouse:d,body:S})},r._triggerEvents=function(a){var o=a.mouse,d=o.sourceEvents;d.mousemove&&v.trigger(a,"mousemove",{mouse:o}),d.mousedown&&v.trigger(a,"mousedown",{mouse:o}),d.mouseup&&v.trigger(a,"mouseup",{mouse:o}),s.clearSourceEvents(o)}})()},function(m,C,u){var r={};m.exports=r;var l=u(2),f=u(8),s=u(1),v=u(12),c=u(3);(function(){r.collides=function(e,n){for(var t=[],i=n.length,a=e.bounds,o=f.collides,d=s.overlaps,g=0;g<i;g++){var S=n[g],A=S.parts.length,p=A===1?0:1;if(d(S.bounds,a))for(var h=p;h<A;h++){var y=S.parts[h];if(d(y.bounds,a)){var x=o(y,e);if(x){t.push(x);break}}}}return t},r.ray=function(e,n,t,i){i=i||1e-100;for(var a=l.angle(n,t),o=l.magnitude(l.sub(n,t)),d=(t.x+n.x)*.5,g=(t.y+n.y)*.5,S=v.rectangle(d,g,o,i,{angle:a}),A=r.collides(S,e),p=0;p<A.length;p+=1){var h=A[p];h.body=h.bodyB=h.bodyA}return A},r.region=function(e,n,t){for(var i=[],a=0;a<e.length;a++){var o=e[a],d=s.overlaps(o.bounds,n);(d&&!t||!d&&t)&&i.push(o)}return i},r.point=function(e,n){for(var t=[],i=0;i<e.length;i++){var a=e[i];if(s.contains(a.bounds,n))for(var o=a.parts.length===1?0:1;o<a.parts.length;o++){var d=a.parts[o];if(s.contains(d.bounds,n)&&c.contains(d.vertices,n)){t.push(a);break}}}return t}})()},function(m,C,u){var r={};m.exports=r;var l=u(4),f=u(0),s=u(6),v=u(1),c=u(5),e=u(2),n=u(14);(function(){var t,i;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(p){window.setTimeout(function(){p(f.now())},1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r._goodFps=30,r._goodDelta=1e3/60,r.create=function(p){var h={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!p.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=f.extend(h,p);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=p.mouse,y.engine=p.engine,y.canvas=y.canvas||d(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.controller=r,y.options.showBroadphase=!1,y.options.pixelRatio!==1&&r.setPixelRatio(y,y.options.pixelRatio),f.isElement(y.element)&&y.element.appendChild(y.canvas),y},r.run=function(p){(function h(y){p.frameRequestId=t(h),a(p,y),r.world(p,y),(p.options.showStats||p.options.showDebug)&&r.stats(p,p.context,y),(p.options.showPerformance||p.options.showDebug)&&r.performance(p,p.context,y)})()},r.stop=function(p){i(p.frameRequestId)},r.setPixelRatio=function(p,h){var y=p.options,x=p.canvas;h==="auto"&&(h=g(x)),y.pixelRatio=h,x.setAttribute("data-pixel-ratio",h),x.width=y.width*h,x.height=y.height*h,x.style.width=y.width+"px",x.style.height=y.height+"px"},r.lookAt=function(p,h,y,x){x=typeof x<"u"?x:!0,h=f.isArray(h)?h:[h],y=y||{x:0,y:0};for(var _={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<h.length;w+=1){var P=h[w],T=P.bounds?P.bounds.min:P.min||P.position||P,M=P.bounds?P.bounds.max:P.max||P.position||P;T&&M&&(T.x<_.min.x&&(_.min.x=T.x),M.x>_.max.x&&(_.max.x=M.x),T.y<_.min.y&&(_.min.y=T.y),M.y>_.max.y&&(_.max.y=M.y))}var I=_.max.x-_.min.x+2*y.x,B=_.max.y-_.min.y+2*y.y,k=p.canvas.height,L=p.canvas.width,E=L/k,F=I/B,R=1,N=1;F>E?N=F/E:R=E/F,p.options.hasBounds=!0,p.bounds.min.x=_.min.x,p.bounds.max.x=_.min.x+I*R,p.bounds.min.y=_.min.y,p.bounds.max.y=_.min.y+B*N,x&&(p.bounds.min.x+=I*.5-I*R*.5,p.bounds.max.x+=I*.5-I*R*.5,p.bounds.min.y+=B*.5-B*N*.5,p.bounds.max.y+=B*.5-B*N*.5),p.bounds.min.x-=y.x,p.bounds.max.x-=y.x,p.bounds.min.y-=y.y,p.bounds.max.y-=y.y,p.mouse&&(n.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.canvas.width,y:(p.bounds.max.y-p.bounds.min.y)/p.canvas.height}),n.setOffset(p.mouse,p.bounds.min))},r.startViewTransform=function(p){var h=p.bounds.max.x-p.bounds.min.x,y=p.bounds.max.y-p.bounds.min.y,x=h/p.options.width,_=y/p.options.height;p.context.setTransform(p.options.pixelRatio/x,0,0,p.options.pixelRatio/_,0,0),p.context.translate(-p.bounds.min.x,-p.bounds.min.y)},r.endViewTransform=function(p){p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0)},r.world=function(p,h){var y=f.now(),x=p.engine,_=x.world,w=p.canvas,P=p.context,T=p.options,M=p.timing,I=s.allBodies(_),B=s.allConstraints(_),k=T.wireframes?T.wireframeBackground:T.background,L=[],E=[],F,R={timestamp:x.timing.timestamp};if(c.trigger(p,"beforeRender",R),p.currentBackground!==k&&A(p,k),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,w.width,w.height),P.globalCompositeOperation="source-over",T.hasBounds){for(F=0;F<I.length;F++){var N=I[F];v.overlaps(N.bounds,p.bounds)&&L.push(N)}for(F=0;F<B.length;F++){var O=B[F],W=O.bodyA,b=O.bodyB,$=O.pointA,G=O.pointB;W&&($=e.add(W.position,O.pointA)),b&&(G=e.add(b.position,O.pointB)),!(!$||!G)&&(v.contains(p.bounds,$)||v.contains(p.bounds,G))&&E.push(O)}r.startViewTransform(p),p.mouse&&(n.setScale(p.mouse,{x:(p.bounds.max.x-p.bounds.min.x)/p.options.width,y:(p.bounds.max.y-p.bounds.min.y)/p.options.height}),n.setOffset(p.mouse,p.bounds.min))}else E=B,L=I,p.options.pixelRatio!==1&&p.context.setTransform(p.options.pixelRatio,0,0,p.options.pixelRatio,0,0);!T.wireframes||x.enableSleeping&&T.showSleeping?r.bodies(p,L,P):(T.showConvexHulls&&r.bodyConvexHulls(p,L,P),r.bodyWireframes(p,L,P)),T.showBounds&&r.bodyBounds(p,L,P),(T.showAxes||T.showAngleIndicator)&&r.bodyAxes(p,L,P),T.showPositions&&r.bodyPositions(p,L,P),T.showVelocity&&r.bodyVelocity(p,L,P),T.showIds&&r.bodyIds(p,L,P),T.showSeparations&&r.separations(p,x.pairs.list,P),T.showCollisions&&r.collisions(p,x.pairs.list,P),T.showVertexNumbers&&r.vertexNumbers(p,L,P),T.showMousePosition&&r.mousePosition(p,p.mouse,P),r.constraints(E,P),T.hasBounds&&r.endViewTransform(p),c.trigger(p,"afterRender",R),M.lastElapsed=f.now()-y},r.stats=function(p,h,y){for(var x=p.engine,_=x.world,w=s.allBodies(_),P=0,T=55,M=44,I=0,B=0,k=0;k<w.length;k+=1)P+=w[k].parts.length;var L={Part:P,Body:w.length,Cons:s.allConstraints(_).length,Comp:s.allComposites(_).length,Pair:x.pairs.list.length};h.fillStyle="#0e0f19",h.fillRect(I,B,T*5.5,M),h.font="12px Arial",h.textBaseline="top",h.textAlign="right";for(var E in L){var F=L[E];h.fillStyle="#aaa",h.fillText(E,I+T,B+8),h.fillStyle="#eee",h.fillText(F,I+T,B+26),I+=T}},r.performance=function(p,h){var y=p.engine,x=p.timing,_=x.deltaHistory,w=x.elapsedHistory,P=x.timestampElapsedHistory,T=x.engineDeltaHistory,M=x.engineElapsedHistory,I=y.timing.lastDelta,B=o(_),k=o(w),L=o(T),E=o(M),F=o(P),R=F/B||0,N=1e3/B||0,O=4,W=12,b=60,$=34,G=10,U=69;h.fillStyle="#0e0f19",h.fillRect(0,50,W*4+b*5+22,$),r.status(h,G,U,b,O,_.length,Math.round(N)+" fps",N/r._goodFps,function(Q){return _[Q]/B-1}),r.status(h,G+W+b,U,b,O,T.length,I.toFixed(2)+" dt",r._goodDelta/I,function(Q){return T[Q]/L-1}),r.status(h,G+(W+b)*2,U,b,O,M.length,E.toFixed(2)+" ut",1-E/r._goodFps,function(Q){return M[Q]/E-1}),r.status(h,G+(W+b)*3,U,b,O,w.length,k.toFixed(2)+" rt",1-k/r._goodFps,function(Q){return w[Q]/k-1}),r.status(h,G+(W+b)*4,U,b,O,P.length,R.toFixed(2)+" x",R*R*R,function(Q){return(P[Q]/_[Q]/R||0)-1})},r.status=function(p,h,y,x,_,w,P,T,M){p.strokeStyle="#888",p.fillStyle="#444",p.lineWidth=1,p.fillRect(h,y+7,x,1),p.beginPath(),p.moveTo(h,y+7-_*f.clamp(.4*M(0),-2,2));for(var I=0;I<x;I+=1)p.lineTo(h+I,y+7-(I<w?_*f.clamp(.4*M(I),-2,2):0));p.stroke(),p.fillStyle="hsl("+f.clamp(25+95*T,0,120)+",100%,60%)",p.fillRect(h,y-7,4,4),p.font="12px Arial",p.textBaseline="middle",p.textAlign="right",p.fillStyle="#eee",p.fillText(P,h+x,y-5)},r.constraints=function(p,h){for(var y=h,x=0;x<p.length;x++){var _=p[x];if(!(!_.render.visible||!_.pointA||!_.pointB)){var w=_.bodyA,P=_.bodyB,T,M;if(w?T=e.add(w.position,_.pointA):T=_.pointA,_.render.type==="pin")y.beginPath(),y.arc(T.x,T.y,3,0,2*Math.PI),y.closePath();else{if(P?M=e.add(P.position,_.pointB):M=_.pointB,y.beginPath(),y.moveTo(T.x,T.y),_.render.type==="spring")for(var I=e.sub(M,T),B=e.perp(e.normalise(I)),k=Math.ceil(f.clamp(_.length/5,12,20)),L,E=1;E<k;E+=1)L=E%2===0?1:-1,y.lineTo(T.x+I.x*(E/k)+B.x*L*4,T.y+I.y*(E/k)+B.y*L*4);y.lineTo(M.x,M.y)}_.render.lineWidth&&(y.lineWidth=_.render.lineWidth,y.strokeStyle=_.render.strokeStyle,y.stroke()),_.render.anchors&&(y.fillStyle=_.render.strokeStyle,y.beginPath(),y.arc(T.x,T.y,3,0,2*Math.PI),y.arc(M.x,M.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},r.bodies=function(p,h,y){var x=y;p.engine;var _=p.options,w=_.showInternalEdges||!_.wireframes,P,T,M,I;for(M=0;M<h.length;M++)if(P=h[M],!!P.render.visible){for(I=P.parts.length>1?1:0;I<P.parts.length;I++)if(T=P.parts[I],!!T.render.visible){if(_.showSleeping&&P.isSleeping?x.globalAlpha=.5*T.render.opacity:T.render.opacity!==1&&(x.globalAlpha=T.render.opacity),T.render.sprite&&T.render.sprite.texture&&!_.wireframes){var B=T.render.sprite,k=S(p,B.texture);x.translate(T.position.x,T.position.y),x.rotate(T.angle),x.drawImage(k,k.width*-B.xOffset*B.xScale,k.height*-B.yOffset*B.yScale,k.width*B.xScale,k.height*B.yScale),x.rotate(-T.angle),x.translate(-T.position.x,-T.position.y)}else{if(T.circleRadius)x.beginPath(),x.arc(T.position.x,T.position.y,T.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(T.vertices[0].x,T.vertices[0].y);for(var L=1;L<T.vertices.length;L++)!T.vertices[L-1].isInternal||w?x.lineTo(T.vertices[L].x,T.vertices[L].y):x.moveTo(T.vertices[L].x,T.vertices[L].y),T.vertices[L].isInternal&&!w&&x.moveTo(T.vertices[(L+1)%T.vertices.length].x,T.vertices[(L+1)%T.vertices.length].y);x.lineTo(T.vertices[0].x,T.vertices[0].y),x.closePath()}_.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=T.render.fillStyle,T.render.lineWidth&&(x.lineWidth=T.render.lineWidth,x.strokeStyle=T.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},r.bodyWireframes=function(p,h,y){var x=y,_=p.options.showInternalEdges,w,P,T,M,I;for(x.beginPath(),T=0;T<h.length;T++)if(w=h[T],!!w.render.visible)for(I=w.parts.length>1?1:0;I<w.parts.length;I++){for(P=w.parts[I],x.moveTo(P.vertices[0].x,P.vertices[0].y),M=1;M<P.vertices.length;M++)!P.vertices[M-1].isInternal||_?x.lineTo(P.vertices[M].x,P.vertices[M].y):x.moveTo(P.vertices[M].x,P.vertices[M].y),P.vertices[M].isInternal&&!_&&x.moveTo(P.vertices[(M+1)%P.vertices.length].x,P.vertices[(M+1)%P.vertices.length].y);x.lineTo(P.vertices[0].x,P.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},r.bodyConvexHulls=function(p,h,y){var x=y,_,w,P;for(x.beginPath(),w=0;w<h.length;w++)if(_=h[w],!(!_.render.visible||_.parts.length===1)){for(x.moveTo(_.vertices[0].x,_.vertices[0].y),P=1;P<_.vertices.length;P++)x.lineTo(_.vertices[P].x,_.vertices[P].y);x.lineTo(_.vertices[0].x,_.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},r.vertexNumbers=function(p,h,y){var x=y,_,w,P;for(_=0;_<h.length;_++){var T=h[_].parts;for(P=T.length>1?1:0;P<T.length;P++){var M=T[P];for(w=0;w<M.vertices.length;w++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(_+"_"+w,M.position.x+(M.vertices[w].x-M.position.x)*.8,M.position.y+(M.vertices[w].y-M.position.y)*.8)}}},r.mousePosition=function(p,h,y){var x=y;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(h.position.x+"  "+h.position.y,h.position.x+5,h.position.y-5)},r.bodyBounds=function(p,h,y){var x=y;p.engine;var _=p.options;x.beginPath();for(var w=0;w<h.length;w++){var P=h[w];if(P.render.visible)for(var T=h[w].parts,M=T.length>1?1:0;M<T.length;M++){var I=T[M];x.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}_.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},r.bodyAxes=function(p,h,y){var x=y;p.engine;var _=p.options,w,P,T,M;for(x.beginPath(),P=0;P<h.length;P++){var I=h[P],B=I.parts;if(I.render.visible)if(_.showAxes)for(T=B.length>1?1:0;T<B.length;T++)for(w=B[T],M=0;M<w.axes.length;M++){var k=w.axes[M];x.moveTo(w.position.x,w.position.y),x.lineTo(w.position.x+k.x*20,w.position.y+k.y*20)}else for(T=B.length>1?1:0;T<B.length;T++)for(w=B[T],M=0;M<w.axes.length;M++)x.moveTo(w.position.x,w.position.y),x.lineTo((w.vertices[0].x+w.vertices[w.vertices.length-1].x)/2,(w.vertices[0].y+w.vertices[w.vertices.length-1].y)/2)}_.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},r.bodyPositions=function(p,h,y){var x=y;p.engine;var _=p.options,w,P,T,M;for(x.beginPath(),T=0;T<h.length;T++)if(w=h[T],!!w.render.visible)for(M=0;M<w.parts.length;M++)P=w.parts[M],x.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),x.closePath();for(_.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),T=0;T<h.length;T++)w=h[T],w.render.visible&&(x.arc(w.positionPrev.x,w.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},r.bodyVelocity=function(p,h,y){var x=y;x.beginPath();for(var _=0;_<h.length;_++){var w=h[_];if(w.render.visible){var P=l.getVelocity(w);x.moveTo(w.position.x,w.position.y),x.lineTo(w.position.x+P.x,w.position.y+P.y)}}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},r.bodyIds=function(p,h,y){var x=y,_,w;for(_=0;_<h.length;_++)if(h[_].render.visible){var P=h[_].parts;for(w=P.length>1?1:0;w<P.length;w++){var T=P[w];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(T.id,T.position.x+10,T.position.y-10)}}},r.collisions=function(p,h,y){var x=y,_=p.options,w,P,T,M;for(x.beginPath(),T=0;T<h.length;T++)if(w=h[T],!!w.isActive)for(P=w.collision,M=0;M<w.activeContacts.length;M++){var I=w.activeContacts[M],B=I.vertex;x.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(_.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),T=0;T<h.length;T++)if(w=h[T],!!w.isActive&&(P=w.collision,w.activeContacts.length>0)){var k=w.activeContacts[0].vertex.x,L=w.activeContacts[0].vertex.y;w.activeContacts.length===2&&(k=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,L=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?x.moveTo(k-P.normal.x*8,L-P.normal.y*8):x.moveTo(k+P.normal.x*8,L+P.normal.y*8),x.lineTo(k,L)}_.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},r.separations=function(p,h,y){var x=y,_=p.options,w,P,T,M,I;for(x.beginPath(),I=0;I<h.length;I++)if(w=h[I],!!w.isActive){P=w.collision,T=P.bodyA,M=P.bodyB;var B=1;!M.isStatic&&!T.isStatic&&(B=.5),M.isStatic&&(B=0),x.moveTo(M.position.x,M.position.y),x.lineTo(M.position.x-P.penetration.x*B,M.position.y-P.penetration.y*B),B=1,!M.isStatic&&!T.isStatic&&(B=.5),T.isStatic&&(B=0),x.moveTo(T.position.x,T.position.y),x.lineTo(T.position.x+P.penetration.x*B,T.position.y+P.penetration.y*B)}_.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},r.inspector=function(p,h){p.engine;var y=p.selected,x=p.render,_=x.options,w;if(_.hasBounds){var P=x.bounds.max.x-x.bounds.min.x,T=x.bounds.max.y-x.bounds.min.y,M=P/x.options.width,I=T/x.options.height;h.scale(1/M,1/I),h.translate(-x.bounds.min.x,-x.bounds.min.y)}for(var B=0;B<y.length;B++){var k=y[B].data;switch(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.9)",h.setLineDash([1,2]),k.type){case"body":w=k.bounds,h.beginPath(),h.rect(Math.floor(w.min.x-3),Math.floor(w.min.y-3),Math.floor(w.max.x-w.min.x+6),Math.floor(w.max.y-w.min.y+6)),h.closePath(),h.stroke();break;case"constraint":var L=k.pointA;k.bodyA&&(L=k.pointB),h.beginPath(),h.arc(L.x,L.y,10,0,2*Math.PI),h.closePath(),h.stroke();break}h.setLineDash([]),h.translate(-.5,-.5)}p.selectStart!==null&&(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.6)",h.fillStyle="rgba(255,165,0,0.1)",w=p.selectBounds,h.beginPath(),h.rect(Math.floor(w.min.x),Math.floor(w.min.y),Math.floor(w.max.x-w.min.x),Math.floor(w.max.y-w.min.y)),h.closePath(),h.stroke(),h.fill(),h.translate(-.5,-.5)),_.hasBounds&&h.setTransform(1,0,0,1,0,0)};var a=function(p,h){var y=p.engine,x=p.timing,_=x.historySize,w=y.timing.timestamp;x.delta=h-x.lastTime||r._goodDelta,x.lastTime=h,x.timestampElapsed=w-x.lastTimestamp||0,x.lastTimestamp=w,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,_),x.engineDeltaHistory.unshift(y.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,_),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,_),x.engineElapsedHistory.unshift(y.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,_),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,_)},o=function(p){for(var h=0,y=0;y<p.length;y+=1)h+=p[y];return h/p.length||0},d=function(p,h){var y=document.createElement("canvas");return y.width=p,y.height=h,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},g=function(p){var h=p.getContext("2d"),y=window.devicePixelRatio||1,x=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return y/x},S=function(p,h){var y=p.textures[h];return y||(y=p.textures[h]=new Image,y.src=h,y)},A=function(p,h){var y=h;/(jpg|gif|png)$/.test(h)&&(y="url("+h+")"),p.canvas.style.background=y,p.canvas.style.backgroundSize="contain",p.currentBackground=h}})()},function(m,C,u){var r={};m.exports=r;var l=u(5),f=u(17),s=u(0);(function(){var v,c;if(typeof window<"u"&&(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,c=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!v){var e;v=function(n){e=setTimeout(function(){n(s.now())},1e3/60)},c=function(){clearTimeout(e)}}r.create=function(n){var t={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},i=s.extend(t,n);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(i.fps*.5),i.fps=1e3/i.delta,i},r.run=function(n,t){return typeof n.positionIterations<"u"&&(t=n,n=r.create()),function i(a){n.frameRequestId=v(i),a&&n.enabled&&r.tick(n,t,a)}(),n},r.tick=function(n,t,i){var a=t.timing,o;n.isFixed?o=n.delta:(o=i-n.timePrev||n.delta,n.timePrev=i,n.deltaHistory.push(o),n.deltaHistory=n.deltaHistory.slice(-n.deltaSampleSize),o=Math.min.apply(null,n.deltaHistory),o=o<n.deltaMin?n.deltaMin:o,o=o>n.deltaMax?n.deltaMax:o,n.delta=o);var d={timestamp:a.timestamp};l.trigger(n,"beforeTick",d),n.frameCounter+=1,i-n.counterTimestamp>=1e3&&(n.fps=n.frameCounter*((i-n.counterTimestamp)/1e3),n.counterTimestamp=i,n.frameCounter=0),l.trigger(n,"tick",d),l.trigger(n,"beforeUpdate",d),f.update(t,o),l.trigger(n,"afterUpdate",d),l.trigger(n,"afterTick",d)},r.stop=function(n){c(n.frameRequestId)},r.start=function(n,t){r.run(n,t)}})()},function(m,C,u){var r={};m.exports=r;var l=u(8),f=u(0),s=f.deprecated;(function(){r.collides=function(v,c){return l.collides(v,c)},s(r,"collides","SAT.collides âž¤ replaced by Collision.collides")})()},function(m,C,u){var r={};m.exports=r,u(1);var l=u(0);(function(){r.pathToVertices=function(f,s){typeof window<"u"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var v,c,e,n,t,i,a,o,d,g,S=[],A,p,h=0,y=0,x=0;s=s||15;var _=function(P,T,M){var I=M%2===1&&M>1;if(!d||P!=d.x||T!=d.y){d&&I?(A=d.x,p=d.y):(A=0,p=0);var B={x:A+P,y:p+T};(I||!d)&&(d=B),S.push(B),y=A+P,x=p+T}},w=function(P){var T=P.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":y=P.x,x=P.y;break;case"H":y=P.x;break;case"V":x=P.y;break}_(y,x,P.pathSegType)}};for(r._svgPathToAbsolute(f),e=f.getTotalLength(),i=[],v=0;v<f.pathSegList.numberOfItems;v+=1)i.push(f.pathSegList.getItem(v));for(a=i.concat();h<e;){if(g=f.getPathSegAtLength(h),t=i[g],t!=o){for(;a.length&&a[0]!=t;)w(a.shift());o=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":n=f.getPointAtLength(h),_(n.x,n.y,0);break}h+=s}for(v=0,c=a.length;v<c;++v)w(a[v]);return S},r._svgPathToAbsolute=function(f){for(var s,v,c,e,n,t,i=f.pathSegList,a=0,o=0,d=i.numberOfItems,g=0;g<d;++g){var S=i.getItem(g),A=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in S&&(a=S.x),"y"in S&&(o=S.y);else switch("x1"in S&&(c=a+S.x1),"x2"in S&&(n=a+S.x2),"y1"in S&&(e=o+S.y1),"y2"in S&&(t=o+S.y2),"x"in S&&(a+=S.x),"y"in S&&(o+=S.y),A){case"m":i.replaceItem(f.createSVGPathSegMovetoAbs(a,o),g);break;case"l":i.replaceItem(f.createSVGPathSegLinetoAbs(a,o),g);break;case"h":i.replaceItem(f.createSVGPathSegLinetoHorizontalAbs(a),g);break;case"v":i.replaceItem(f.createSVGPathSegLinetoVerticalAbs(o),g);break;case"c":i.replaceItem(f.createSVGPathSegCurvetoCubicAbs(a,o,c,e,n,t),g);break;case"s":i.replaceItem(f.createSVGPathSegCurvetoCubicSmoothAbs(a,o,n,t),g);break;case"q":i.replaceItem(f.createSVGPathSegCurvetoQuadraticAbs(a,o,c,e),g);break;case"t":i.replaceItem(f.createSVGPathSegCurvetoQuadraticSmoothAbs(a,o),g);break;case"a":i.replaceItem(f.createSVGPathSegArcAbs(a,o,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),g);break;case"z":case"Z":a=s,o=v;break}(A=="M"||A=="m")&&(s=a,v=o)}}})()},function(m,C,u){var r={};m.exports=r;var l=u(6);u(0),function(){r.create=l.create,r.add=l.add,r.remove=l.remove,r.clear=l.clear,r.addComposite=l.addComposite,r.addBody=l.addBody,r.addConstraint=l.addConstraint}()}])})})(fe);var xe=fe.exports;const H=he(xe);var te={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(V){(function(){var D=function(){this.init()};D.prototype={init:function(){var e=this||m;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||m;if(e=parseFloat(e),n.ctx||c(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,m.ctx.currentTime);for(var t=0;t<n._howls.length;t++)if(!n._howls[t]._webAudio)for(var i=n._howls[t]._getSoundIds(),a=0;a<i.length;a++){var o=n._howls[t]._soundById(i[a]);o&&o._node&&(o._node.volume=o._volume*e)}return n}return n._volume},mute:function(e){var n=this||m;n.ctx||c(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,m.ctx.currentTime);for(var t=0;t<n._howls.length;t++)if(!n._howls[t]._webAudio)for(var i=n._howls[t]._getSoundIds(),a=0;a<i.length;a++){var o=n._howls[t]._soundById(i[a]);o&&o._node&&(o._node.muted=e?!0:o._muted)}return n},stop:function(){for(var e=this||m,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||m,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||m)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||m;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||m,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return e}if(!n||typeof n.canPlayType!="function")return e;var t=n.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",a=i.match(/OPR\/(\d+)/g),o=a&&parseInt(a[0].split("/")[1],10)<33,d=i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1,g=i.match(/Version\/(.*?) /),S=d&&g&&parseInt(g[1],10)<15;return e._codecs={mp3:!!(!o&&(t||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!t,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!S&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!S&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||m;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch{e.noAudio=!0;break}for(var a=0;a<e._howls.length;a++)if(!e._howls[a]._webAudio)for(var o=e._howls[a]._getSoundIds(),d=0;d<o.length;d++){var g=e._howls[a]._soundById(o[d]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}e._autoResume();var S=e.ctx.createBufferSource();S.buffer=e._scratchBuffer,S.connect(e.ctx.destination),typeof S.start>"u"?S.noteOn(0):S.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),S.onended=function(){S.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||m;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||m;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!m.usingWebAudio)){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var t=0;t<e._howls[n]._sounds.length;t++)if(!e._howls[n]._sounds[t]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var i=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(i,i)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!m.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var m=new D,C=function(e){var n=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(e)};C.prototype={init:function(e){var n=this;return m.ctx||c(),n._autoplay=e.autoplay||!1,n._format=typeof e.format!="string"?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src=typeof e.src!="string"?e.src:[e.src],n._volume=e.volume!==void 0?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=m.usingWebAudio&&!n._html5,typeof m.ctx<"u"&&m.ctx&&m.autoUnlock&&m._unlockAudio(),m._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var e=this,n=null;if(m.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var t=0;t<e._src.length;t++){var i,a;if(e._format&&e._format[t])i=e._format[t];else{if(a=e._src[t],typeof a!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(a),i||(i=/\.([^.]+)$/.exec(a.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&m.codecs(i)){n=e._src[t];break}}if(!n){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=n,e._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new u(e),e._webAudio&&l(e),e},play:function(e,n){var t=this,i=null;if(typeof e=="number")i=e,e=null;else{if(typeof e=="string"&&t._state==="loaded"&&!t._sprite[e])return null;if(typeof e>"u"&&(e="__default",!t._playLock)){for(var a=0,o=0;o<t._sounds.length;o++)t._sounds[o]._paused&&!t._sounds[o]._ended&&(a++,i=t._sounds[o]._id);a===1?e=null:i=null}}var d=i?t._soundById(i):t._inactiveSound();if(!d)return null;if(i&&!e&&(e=d._sprite||"__default"),t._state!=="loaded"){d._sprite=e,d._ended=!1;var g=d._id;return t._queue.push({event:"play",action:function(){t.play(g)}}),g}if(i&&!d._paused)return n||t._loadQueue("play"),d._id;t._webAudio&&m._autoResume();var S=Math.max(0,d._seek>0?d._seek:t._sprite[e][0]/1e3),A=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-S),p=A*1e3/Math.abs(d._rate),h=t._sprite[e][0]/1e3,y=(t._sprite[e][0]+t._sprite[e][1])/1e3;d._sprite=e,d._ended=!1;var x=function(){d._paused=!1,d._seek=S,d._start=h,d._stop=y,d._loop=!!(d._loop||t._sprite[e][2])};if(S>=y){t._ended(d);return}var _=d._node;if(t._webAudio){var w=function(){t._playLock=!1,x(),t._refreshBuffer(d);var I=d._muted||t._muted?0:d._volume;_.gain.setValueAtTime(I,m.ctx.currentTime),d._playStart=m.ctx.currentTime,typeof _.bufferSource.start>"u"?d._loop?_.bufferSource.noteGrainOn(0,S,86400):_.bufferSource.noteGrainOn(0,S,A):d._loop?_.bufferSource.start(0,S,86400):_.bufferSource.start(0,S,A),p!==1/0&&(t._endTimers[d._id]=setTimeout(t._ended.bind(t,d),p)),n||setTimeout(function(){t._emit("play",d._id),t._loadQueue()},0)};m.state==="running"&&m.ctx.state!=="interrupted"?w():(t._playLock=!0,t.once("resume",w),t._clearTimer(d._id))}else{var P=function(){_.currentTime=S,_.muted=d._muted||t._muted||m._muted||_.muted,_.volume=d._volume*m.volume(),_.playbackRate=d._rate;try{var I=_.play();if(I&&typeof Promise<"u"&&(I instanceof Promise||typeof I.then=="function")?(t._playLock=!0,x(),I.then(function(){t._playLock=!1,_._unlocked=!0,n?t._loadQueue():t._emit("play",d._id)}).catch(function(){t._playLock=!1,t._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):n||(t._playLock=!1,x(),t._emit("play",d._id)),_.playbackRate=d._rate,_.paused){t._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||d._loop?t._endTimers[d._id]=setTimeout(t._ended.bind(t,d),p):(t._endTimers[d._id]=function(){t._ended(d),_.removeEventListener("ended",t._endTimers[d._id],!1)},_.addEventListener("ended",t._endTimers[d._id],!1))}catch(B){t._emit("playerror",d._id,B)}};_.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(_.src=t._src,_.load());var T=window&&window.ejecta||!_.readyState&&m._navigator.isCocoonJS;if(_.readyState>=3||T)P();else{t._playLock=!0,t._state="loading";var M=function(){t._state="loaded",P(),_.removeEventListener(m._canPlayEvent,M,!1)};_.addEventListener(m._canPlayEvent,M,!1),t._clearTimer(d._id)}}return d._id},pause:function(e){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var t=n._getSoundIds(e),i=0;i<t.length;i++){n._clearTimer(t[i]);var a=n._soundById(t[i]);if(a&&!a._paused&&(a._seek=n.seek(t[i]),a._rateSeek=0,a._paused=!0,n._stopFade(t[i]),a._node))if(n._webAudio){if(!a._node.bufferSource)continue;typeof a._node.bufferSource.stop>"u"?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)}else(!isNaN(a._node.duration)||a._node.duration===1/0)&&a._node.pause();arguments[1]||n._emit("pause",a?a._id:null)}return n},stop:function(e,n){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"stop",action:function(){t.stop(e)}}),t;for(var i=t._getSoundIds(e),a=0;a<i.length;a++){t._clearTimer(i[a]);var o=t._soundById(i[a]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,t._stopFade(i[a]),o._node&&(t._webAudio?o._node.bufferSource&&(typeof o._node.bufferSource.stop>"u"?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)):(!isNaN(o._node.duration)||o._node.duration===1/0)&&(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&t._clearSound(o._node))),n||t._emit("stop",o._id))}return t},mute:function(e,n){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,n)}}),t;if(typeof n>"u")if(typeof e=="boolean")t._muted=e;else return t._muted;for(var i=t._getSoundIds(n),a=0;a<i.length;a++){var o=t._soundById(i[a]);o&&(o._muted=e,o._interval&&t._stopFade(o._id),t._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,m.ctx.currentTime):o._node&&(o._node.muted=m._muted?!0:e),t._emit("mute",o._id))}return t},volume:function(){var e=this,n=arguments,t,i;if(n.length===0)return e._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var a=e._getSoundIds(),o=a.indexOf(n[0]);o>=0?i=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),i=parseInt(n[1],10));var d;if(typeof t<"u"&&t>=0&&t<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof i>"u"&&(e._volume=t),i=e._getSoundIds(i);for(var g=0;g<i.length;g++)d=e._soundById(i[g]),d&&(d._volume=t,n[2]||e._stopFade(i[g]),e._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(t,m.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=t*m.volume()),e._emit("volume",d._id))}else return d=i?e._soundById(i):e._sounds[0],d?d._volume:0;return e},fade:function(e,n,t,i){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,n,t,i)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),t=parseFloat(t),a.volume(e,i);for(var o=a._getSoundIds(i),d=0;d<o.length;d++){var g=a._soundById(o[d]);if(g){if(i||a._stopFade(o[d]),a._webAudio&&!g._muted){var S=m.ctx.currentTime,A=S+t/1e3;g._volume=e,g._node.gain.setValueAtTime(e,S),g._node.gain.linearRampToValueAtTime(n,A)}a._startFadeInterval(g,e,n,t,o[d],typeof i>"u")}}return a},_startFadeInterval:function(e,n,t,i,a,o){var d=this,g=n,S=t-n,A=Math.abs(S/.01),p=Math.max(4,A>0?i/A:i),h=Date.now();e._fadeTo=t,e._interval=setInterval(function(){var y=(Date.now()-h)/i;h=Date.now(),g+=S*y,g=Math.round(g*100)/100,S<0?g=Math.max(t,g):g=Math.min(t,g),d._webAudio?e._volume=g:d.volume(g,e._id,!0),o&&(d._volume=g),(t<n&&g<=t||t>n&&g>=t)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,d.volume(t,e._id),d._emit("fade",e._id))},p)},_stopFade:function(e){var n=this,t=n._soundById(e);return t&&t._interval&&(n._webAudio&&t._node.gain.cancelScheduledValues(m.ctx.currentTime),clearInterval(t._interval),t._interval=null,n.volume(t._fadeTo,e),t._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e=this,n=arguments,t,i,a;if(n.length===0)return e._loop;if(n.length===1)if(typeof n[0]=="boolean")t=n[0],e._loop=t;else return a=e._soundById(parseInt(n[0],10)),a?a._loop:!1;else n.length===2&&(t=n[0],i=parseInt(n[1],10));for(var o=e._getSoundIds(i),d=0;d<o.length;d++)a=e._soundById(o[d]),a&&(a._loop=t,e._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=t,t&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop,e.playing(o[d])&&(e.pause(o[d],!0),e.play(o[d],!0)))));return e},rate:function(){var e=this,n=arguments,t,i;if(n.length===0)i=e._sounds[0]._id;else if(n.length===1){var a=e._getSoundIds(),o=a.indexOf(n[0]);o>=0?i=parseInt(n[0],10):t=parseFloat(n[0])}else n.length===2&&(t=parseFloat(n[0]),i=parseInt(n[1],10));var d;if(typeof t=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof i>"u"&&(e._rate=t),i=e._getSoundIds(i);for(var g=0;g<i.length;g++)if(d=e._soundById(i[g]),d){e.playing(i[g])&&(d._rateSeek=e.seek(i[g]),d._playStart=e._webAudio?m.ctx.currentTime:d._playStart),d._rate=t,e._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(t,m.ctx.currentTime):d._node&&(d._node.playbackRate=t);var S=e.seek(i[g]),A=(e._sprite[d._sprite][0]+e._sprite[d._sprite][1])/1e3-S,p=A*1e3/Math.abs(d._rate);(e._endTimers[i[g]]||!d._paused)&&(e._clearTimer(i[g]),e._endTimers[i[g]]=setTimeout(e._ended.bind(e,d),p)),e._emit("rate",d._id)}}else return d=e._soundById(i),d?d._rate:e._rate;return e},seek:function(){var e=this,n=arguments,t,i;if(n.length===0)e._sounds.length&&(i=e._sounds[0]._id);else if(n.length===1){var a=e._getSoundIds(),o=a.indexOf(n[0]);o>=0?i=parseInt(n[0],10):e._sounds.length&&(i=e._sounds[0]._id,t=parseFloat(n[0]))}else n.length===2&&(t=parseFloat(n[0]),i=parseInt(n[1],10));if(typeof i>"u")return 0;if(typeof t=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var d=e._soundById(i);if(d)if(typeof t=="number"&&t>=0){var g=e.playing(i);g&&e.pause(i,!0),d._seek=t,d._ended=!1,e._clearTimer(i),!e._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=t);var S=function(){g&&e.play(i,!0),e._emit("seek",i)};if(g&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):S()};setTimeout(A,0)}else S()}else if(e._webAudio){var p=e.playing(i)?m.ctx.currentTime-d._playStart:0,h=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(h+p*Math.abs(d._rate))}else return d._node.currentTime;return e},playing:function(e){var n=this;if(typeof e=="number"){var t=n._soundById(e);return t?!t._paused:!1}for(var i=0;i<n._sounds.length;i++)if(!n._sounds[i]._paused)return!0;return!1},duration:function(e){var n=this,t=n._duration,i=n._soundById(e);return i&&(t=n._sprite[i._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,t=0;t<n.length;t++)n[t]._paused||e.stop(n[t]._id),e._webAudio||(e._clearSound(n[t]._node),n[t]._node.removeEventListener("error",n[t]._errorFn,!1),n[t]._node.removeEventListener(m._canPlayEvent,n[t]._loadFn,!1),n[t]._node.removeEventListener("ended",n[t]._endFn,!1),m._releaseHtml5Audio(n[t]._node)),delete n[t]._node,e._clearTimer(n[t]._id);var i=m._howls.indexOf(e);i>=0&&m._howls.splice(i,1);var a=!0;for(t=0;t<m._howls.length;t++)if(m._howls[t]._src===e._src||e._src.indexOf(m._howls[t]._src)>=0){a=!1;break}return r&&a&&delete r[e._src],m.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,t,i){var a=this,o=a["_on"+e];return typeof n=="function"&&o.push(i?{id:t,fn:n,once:i}:{id:t,fn:n}),a},off:function(e,n,t){var i=this,a=i["_on"+e],o=0;if(typeof n=="number"&&(t=n,n=null),n||t)for(o=0;o<a.length;o++){var d=t===a[o].id;if(n===a[o].fn&&d||!n&&d){a.splice(o,1);break}}else if(e)i["_on"+e]=[];else{var g=Object.keys(i);for(o=0;o<g.length;o++)g[o].indexOf("_on")===0&&Array.isArray(i[g[o]])&&(i[g[o]]=[])}return i},once:function(e,n,t){var i=this;return i.on(e,n,t,1),i},_emit:function(e,n,t){for(var i=this,a=i["_on"+e],o=a.length-1;o>=0;o--)(!a[o].id||a[o].id===n||e==="load")&&(setTimeout((function(d){d.call(this,n,t)}).bind(i,a[o].fn),0),a[o].once&&i.off(e,a[o].fn,a[o].id));return i._loadQueue(e),i},_loadQueue:function(e){var n=this;if(n._queue.length>0){var t=n._queue[0];t.event===e&&(n._queue.shift(),n._loadQueue()),e||t.action()}return n},_ended:function(e){var n=this,t=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var i=!!(e._loop||n._sprite[t][2]);if(n._emit("end",e._id),!n._webAudio&&i&&n.stop(e._id,!0).play(e._id),n._webAudio&&i){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=m.ctx.currentTime;var a=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),a)}return n._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),m._autoSuspend()),!n._webAudio&&!i&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if(typeof n._endTimers[e]!="function")clearTimeout(n._endTimers[e]);else{var t=n._soundById(e);t&&t._node&&t._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,t=0;t<n._sounds.length;t++)if(e===n._sounds[t]._id)return n._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new u(e)},_drain:function(){var e=this,n=e._pool,t=0,i=0;if(!(e._sounds.length<n)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&t++;for(i=e._sounds.length-1;i>=0;i--){if(t<=n)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),t--)}}},_getSoundIds:function(e){var n=this;if(typeof e>"u"){for(var t=[],i=0;i<n._sounds.length;i++)t.push(n._sounds[i]._id);return t}else return[e]},_refreshBuffer:function(e){var n=this;return e._node.bufferSource=m.ctx.createBufferSource(),e._node.bufferSource.buffer=r[n._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,m.ctx.currentTime),n},_cleanBuffer:function(e){var n=this,t=m._navigator&&m._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return n;if(m._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=m._scratchBuffer}catch{}return e.bufferSource=null,n},_clearSound:function(e){var n=/MSIE |Trident\//.test(m._navigator&&m._navigator.userAgent);n||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(e){this._parent=e,this.init()};u.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++m._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,t=m._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof m.ctx.createGain>"u"?m.ctx.createGainNode():m.ctx.createGain(),e._node.gain.setValueAtTime(t,m.ctx.currentTime),e._node.paused=!0,e._node.connect(m.masterGain)):m.noAudio||(e._node=m._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(m._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=n._preload===!0?"auto":n._preload,e._node.volume=t*m.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++m._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(e._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(m._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(e._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var r={},l=function(e){var n=e._src;if(r[n]){e._duration=r[n].duration,v(e);return}if(/^data:[^;]+;base64,/.test(n)){for(var t=atob(n.split(",")[1]),i=new Uint8Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);s(i.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,n,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(d){o.setRequestHeader(d,e._xhr.headers[d])}),o.onload=function(){var d=(o.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".");return}s(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete r[n],e.load())},f(o)}},f=function(e){try{e.send()}catch{e.onerror()}},s=function(e,n){var t=function(){n._emit("loaderror",null,"Decoding audio data failed.")},i=function(a){a&&n._sounds.length>0?(r[n._src]=a,v(n,a)):t()};typeof Promise<"u"&&m.ctx.decodeAudioData.length===1?m.ctx.decodeAudioData(e).then(i).catch(t):m.ctx.decodeAudioData(e,i,t)},v=function(e,n){n&&!e._duration&&(e._duration=n.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(m.usingWebAudio){try{typeof AudioContext<"u"?m.ctx=new AudioContext:typeof webkitAudioContext<"u"?m.ctx=new webkitAudioContext:m.usingWebAudio=!1}catch{m.usingWebAudio=!1}m.ctx||(m.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(m._navigator&&m._navigator.platform),n=m._navigator&&m._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=n?parseInt(n[1],10):null;if(e&&t&&t<9){var i=/safari/.test(m._navigator&&m._navigator.userAgent.toLowerCase());m._navigator&&!i&&(m.usingWebAudio=!1)}m.usingWebAudio&&(m.masterGain=typeof m.ctx.createGain>"u"?m.ctx.createGainNode():m.ctx.createGain(),m.masterGain.gain.setValueAtTime(m._muted?0:m._volume,m.ctx.currentTime),m.masterGain.connect(m.ctx.destination)),m._setup()}};V.Howler=m,V.Howl=C,typeof K<"u"?(K.HowlerGlobal=D,K.Howler=m,K.Howl=C,K.Sound=u):typeof window<"u"&&(window.HowlerGlobal=D,window.Howler=m,window.Howl=C,window.Sound=u)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(m){var C=this;if(!C.ctx||!C.ctx.listener)return C;for(var u=C._howls.length-1;u>=0;u--)C._howls[u].stereo(m);return C},HowlerGlobal.prototype.pos=function(m,C,u){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(C=typeof C!="number"?r._pos[1]:C,u=typeof u!="number"?r._pos[2]:u,typeof m=="number")r._pos=[m,C,u],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(m,C,u,r,l,f){var s=this;if(!s.ctx||!s.ctx.listener)return s;var v=s._orientation;if(C=typeof C!="number"?v[1]:C,u=typeof u!="number"?v[2]:u,r=typeof r!="number"?v[3]:r,l=typeof l!="number"?v[4]:l,f=typeof f!="number"?v[5]:f,typeof m=="number")s._orientation=[m,C,u,r,l,f],typeof s.ctx.listener.forwardX<"u"?(s.ctx.listener.forwardX.setTargetAtTime(m,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(C,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(u,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(m,C,u,r,l,f);else return v;return s},Howl.prototype.init=function(m){return function(C){var u=this;return u._orientation=C.orientation||[1,0,0],u._stereo=C.stereo||null,u._pos=C.pos||null,u._pannerAttr={coneInnerAngle:typeof C.coneInnerAngle<"u"?C.coneInnerAngle:360,coneOuterAngle:typeof C.coneOuterAngle<"u"?C.coneOuterAngle:360,coneOuterGain:typeof C.coneOuterGain<"u"?C.coneOuterGain:0,distanceModel:typeof C.distanceModel<"u"?C.distanceModel:"inverse",maxDistance:typeof C.maxDistance<"u"?C.maxDistance:1e4,panningModel:typeof C.panningModel<"u"?C.panningModel:"HRTF",refDistance:typeof C.refDistance<"u"?C.refDistance:1,rolloffFactor:typeof C.rolloffFactor<"u"?C.rolloffFactor:1},u._onstereo=C.onstereo?[{fn:C.onstereo}]:[],u._onpos=C.onpos?[{fn:C.onpos}]:[],u._onorientation=C.onorientation?[{fn:C.onorientation}]:[],m.call(this,C)}}(Howl.prototype.init),Howl.prototype.stereo=function(m,C){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"stereo",action:function(){u.stereo(m,C)}}),u;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof C>"u")if(typeof m=="number")u._stereo=m,u._pos=[m,0,0];else return u._stereo;for(var l=u._getSoundIds(C),f=0;f<l.length;f++){var s=u._soundById(l[f]);if(s)if(typeof m=="number")s._stereo=m,s._pos=[m,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",(!s._panner||!s._panner.pan)&&D(s,r),r==="spatial"?typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(m,0,0):s._panner.pan.setValueAtTime(m,Howler.ctx.currentTime)),u._emit("stereo",s._id);else return s._stereo}return u},Howl.prototype.pos=function(m,C,u,r){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(m,C,u,r)}}),l;if(C=typeof C!="number"?0:C,u=typeof u!="number"?-.5:u,typeof r>"u")if(typeof m=="number")l._pos=[m,C,u];else return l._pos;for(var f=l._getSoundIds(r),s=0;s<f.length;s++){var v=l._soundById(f[s]);if(v)if(typeof m=="number")v._pos=[m,C,u],v._node&&((!v._panner||v._panner.pan)&&D(v,"spatial"),typeof v._panner.positionX<"u"?(v._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(C,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(u,Howler.ctx.currentTime)):v._panner.setPosition(m,C,u)),l._emit("pos",v._id);else return v._pos}return l},Howl.prototype.orientation=function(m,C,u,r){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(m,C,u,r)}}),l;if(C=typeof C!="number"?l._orientation[1]:C,u=typeof u!="number"?l._orientation[2]:u,typeof r>"u")if(typeof m=="number")l._orientation=[m,C,u];else return l._orientation;for(var f=l._getSoundIds(r),s=0;s<f.length;s++){var v=l._soundById(f[s]);if(v)if(typeof m=="number")v._orientation=[m,C,u],v._node&&(v._panner||(v._pos||(v._pos=l._pos||[0,0,-.5]),D(v,"spatial")),typeof v._panner.orientationX<"u"?(v._panner.orientationX.setValueAtTime(m,Howler.ctx.currentTime),v._panner.orientationY.setValueAtTime(C,Howler.ctx.currentTime),v._panner.orientationZ.setValueAtTime(u,Howler.ctx.currentTime)):v._panner.setOrientation(m,C,u)),l._emit("orientation",v._id);else return v._orientation}return l},Howl.prototype.pannerAttr=function(){var m=this,C=arguments,u,r,l;if(!m._webAudio)return m;if(C.length===0)return m._pannerAttr;if(C.length===1)if(typeof C[0]=="object")u=C[0],typeof r>"u"&&(u.pannerAttr||(u.pannerAttr={coneInnerAngle:u.coneInnerAngle,coneOuterAngle:u.coneOuterAngle,coneOuterGain:u.coneOuterGain,distanceModel:u.distanceModel,maxDistance:u.maxDistance,refDistance:u.refDistance,rolloffFactor:u.rolloffFactor,panningModel:u.panningModel}),m._pannerAttr={coneInnerAngle:typeof u.pannerAttr.coneInnerAngle<"u"?u.pannerAttr.coneInnerAngle:m._coneInnerAngle,coneOuterAngle:typeof u.pannerAttr.coneOuterAngle<"u"?u.pannerAttr.coneOuterAngle:m._coneOuterAngle,coneOuterGain:typeof u.pannerAttr.coneOuterGain<"u"?u.pannerAttr.coneOuterGain:m._coneOuterGain,distanceModel:typeof u.pannerAttr.distanceModel<"u"?u.pannerAttr.distanceModel:m._distanceModel,maxDistance:typeof u.pannerAttr.maxDistance<"u"?u.pannerAttr.maxDistance:m._maxDistance,refDistance:typeof u.pannerAttr.refDistance<"u"?u.pannerAttr.refDistance:m._refDistance,rolloffFactor:typeof u.pannerAttr.rolloffFactor<"u"?u.pannerAttr.rolloffFactor:m._rolloffFactor,panningModel:typeof u.pannerAttr.panningModel<"u"?u.pannerAttr.panningModel:m._panningModel});else return l=m._soundById(parseInt(C[0],10)),l?l._pannerAttr:m._pannerAttr;else C.length===2&&(u=C[0],r=parseInt(C[1],10));for(var f=m._getSoundIds(r),s=0;s<f.length;s++)if(l=m._soundById(f[s]),l){var v=l._pannerAttr;v={coneInnerAngle:typeof u.coneInnerAngle<"u"?u.coneInnerAngle:v.coneInnerAngle,coneOuterAngle:typeof u.coneOuterAngle<"u"?u.coneOuterAngle:v.coneOuterAngle,coneOuterGain:typeof u.coneOuterGain<"u"?u.coneOuterGain:v.coneOuterGain,distanceModel:typeof u.distanceModel<"u"?u.distanceModel:v.distanceModel,maxDistance:typeof u.maxDistance<"u"?u.maxDistance:v.maxDistance,refDistance:typeof u.refDistance<"u"?u.refDistance:v.refDistance,rolloffFactor:typeof u.rolloffFactor<"u"?u.rolloffFactor:v.rolloffFactor,panningModel:typeof u.panningModel<"u"?u.panningModel:v.panningModel};var c=l._panner;c||(l._pos||(l._pos=m._pos||[0,0,-.5]),D(l,"spatial"),c=l._panner),c.coneInnerAngle=v.coneInnerAngle,c.coneOuterAngle=v.coneOuterAngle,c.coneOuterGain=v.coneOuterGain,c.distanceModel=v.distanceModel,c.maxDistance=v.maxDistance,c.refDistance=v.refDistance,c.rolloffFactor=v.rolloffFactor,c.panningModel=v.panningModel}return m},Sound.prototype.init=function(m){return function(){var C=this,u=C._parent;C._orientation=u._orientation,C._stereo=u._stereo,C._pos=u._pos,C._pannerAttr=u._pannerAttr,m.call(this),C._stereo?u.stereo(C._stereo):C._pos&&u.pos(C._pos[0],C._pos[1],C._pos[2],C._id)}}(Sound.prototype.init),Sound.prototype.reset=function(m){return function(){var C=this,u=C._parent;return C._orientation=u._orientation,C._stereo=u._stereo,C._pos=u._pos,C._pannerAttr=u._pannerAttr,C._stereo?u.stereo(C._stereo):C._pos?u.pos(C._pos[0],C._pos[1],C._pos[2],C._id):C._panner&&(C._panner.disconnect(0),C._panner=void 0,u._refreshBuffer(C)),m.call(this)}}(Sound.prototype.reset);var D=function(m,C){C=C||"spatial",C==="spatial"?(m._panner=Howler.ctx.createPanner(),m._panner.coneInnerAngle=m._pannerAttr.coneInnerAngle,m._panner.coneOuterAngle=m._pannerAttr.coneOuterAngle,m._panner.coneOuterGain=m._pannerAttr.coneOuterGain,m._panner.distanceModel=m._pannerAttr.distanceModel,m._panner.maxDistance=m._pannerAttr.maxDistance,m._panner.refDistance=m._pannerAttr.refDistance,m._panner.rolloffFactor=m._pannerAttr.rolloffFactor,m._panner.panningModel=m._pannerAttr.panningModel,typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(m._pos[0],Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(m._pos[1],Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(m._pos[2],Howler.ctx.currentTime)):m._panner.setPosition(m._pos[0],m._pos[1],m._pos[2]),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(m._orientation[0],Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(m._orientation[1],Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(m._orientation[2],Howler.ctx.currentTime)):m._panner.setOrientation(m._orientation[0],m._orientation[1],m._orientation[2])):(m._panner=Howler.ctx.createStereoPanner(),m._panner.pan.setValueAtTime(m._stereo,Howler.ctx.currentTime)),m._panner.connect(m._node),m._paused||m._parent.pause(m._id,!0).play(m._id,!0)}})()})(te);function X(V,D,m,C,u){return H.Bodies.rectangle(V,D,m,C,{isStatic:!0,angle:u*Math.PI/180})}class ye{constructor(D){Y(this,"engine");Y(this,"world");Y(this,"is_gameover",!1);Y(this,"is_playing",!1);const m=H.Render,C=1600,u=800;this.engine=H.Engine.create(),this.world=this.engine.world;const r=this.world,l=m.create({element:document.querySelector(D),engine:this.engine,options:{width:C*1,height:u*1,wireframes:!1,background:"white"}});m.lookAt(l,{min:{x:C*0,y:u*0},max:{x:C*1,y:u*1.2}}),m.run(l);const f=H.Runner.create({});H.Runner.run(f,this.engine);const s=230;H.World.add(r,[X(s,260,500,10,60),X(800-s,260,500,10,-60),X(s,690,500,10,-60),X(800-s,690,500,10,60),X(400,900,600,10,0)]),H.World.add(r,[X(1e3,400,400,50,90),X(1400,400,400,50,90),X(1200,200,400,50,0),X(1200,600,400,50,0)]),H.World.add(r,H.Bodies.rectangle(1200,400,1,1,{isStatic:!0,render:{sprite:{xScale:.7,yScale:.7,texture:"./images/mama.png"}}})),H.World.add(r,[H.Bodies.circle(1200,400,10,{restitution:1.3,render:{sprite:{xScale:.3,yScale:.3,texture:"./images/yopparai.png"}}}),H.Bodies.circle(1200,400,10,{restitution:1.4,render:{sprite:{xScale:.3,yScale:.3,texture:"./images/yopparai.png"}}})]);const v=H.Mouse.create(l.canvas),c=H.MouseConstraint.create(this.engine,{mouse:v,constraint:{stiffness:.9,render:{visible:!1}}});H.World.add(r,c),l.mouse=v;const e=new te.Howl({src:["./sound/ã“ã‚“ã¨ã©ã…ãµã‡ç´ æNo.0173-å†¬çœ çµ‚äº†ï¼.mp3"],loop:!0,volume:.5}),n=new te.Howl({src:["./sound/nc9232.mp3"],volume:.5});e.play();const t=document.querySelector(".matter");t&&t.addEventListener("click",()=>{if(!this.is_playing){this.is_playing=!0;var o=H.Composites.stack(240,-250,12,12,0,0,(d,g)=>{const S=H.Common.random(10,20);let A="./images/popcorn.png",p=S*.02;return H.Common.random(0,2)>1&&(A="./images/poteto.png",p=S*.02),H.Bodies.circle(d,g,S,{friction:1e-5,restitution:.5,density:.001,render:{sprite:{xScale:p,yScale:p,texture:A}},label:"sand"})});H.Composite.add(r,o)}});const i=H.Bodies.rectangle(800,400,1,1,{isStatic:!0,render:{sprite:{xScale:1.5,yScale:1.5,texture:"./images/gameover.png"}}});let a=this.is_gameover;H.Events.on(this.engine,"afterUpdate",function(){H.Composite.allBodies(r).filter(g=>g.label==="sand"&&g.position.y>450).length>=143&&(a||(a=!0,console.log("gameover"),H.World.add(r,i),n.play()))})}}const _e=()=>{new ye(".matter")};_e();
